# 集成测试指南

本文档说明如何测试已完成的功能与前端页面的集成。

## 🚀 启动服务

### 方式一：使用启动脚本（推荐）

**Windows:**
```bash
.\start.bat
```

**PowerShell:**
```powershell
.\start.ps1
```

### 方式二：手动启动

**1. 启动后端服务器:**
```bash
cd server
go run main.go
```
后端将在 `http://localhost:8080` 启动

**2. 启动前端开发服务器:**
```bash
cd client
npm run dev
```
前端将在 `http://localhost:5173` 启动

**3. 访问游戏:**
在浏览器中打开 `http://localhost:5173`

## ✅ 功能测试清单

### 1. 基础战斗系统

#### 1.1 回合机制测试
- [ ] 点击"开始挂机"按钮，战斗自动开始
- [ ] 观察战斗日志，确认每回合都有行动记录
- [ ] 确认角色和怪物按速度顺序行动（速度高的先行动）
- [ ] 观察战斗日志中的"Round X"标记，确认回合计数正确

#### 1.2 伤害计算测试
- [ ] 观察战斗日志中的伤害数值
- [ ] 确认物理伤害、魔法伤害、元素伤害（火焰、冰霜、暗影、神圣、自然）正确显示
- [ ] 观察暴击伤害（显示为"💥暴击！"）
- [ ] 观察闪避（显示为"闪避了攻击"）

#### 1.3 治疗计算测试
- [ ] 使用治疗技能，观察治疗数值
- [ ] 确认治疗不会超过最大HP（不会溢出）
- [ ] 观察治疗加成效果

### 2. DOT/HOT效果测试

#### 2.1 DOT（持续伤害）测试
- [ ] 使用带有DOT效果的技能
- [ ] 观察战斗日志中是否出现"受到持续伤害，损失 X 点生命值"的日志
- [ ] 确认DOT效果每回合触发
- [ ] 确认DOT效果在持续时间结束后消失

#### 2.2 HOT（持续治疗）测试
- [ ] 使用带有HOT效果的技能
- [ ] 观察战斗日志中是否出现"持续恢复效果恢复了 X 点生命值"的日志
- [ ] 确认HOT效果每回合触发
- [ ] 确认HOT效果在持续时间结束后消失

#### 2.3 DOT/HOT同时存在测试
- [ ] 同时拥有DOT和HOT效果
- [ ] 观察每回合的HP变化，确认两个效果都生效
- [ ] 确认净效果（HOT - DOT）正确计算

### 3. Buff/Debuff系统测试

#### 3.1 Buff显示测试
- [ ] 使用Buff技能（如战斗怒吼）
- [ ] 在角色卡片上观察Buff图标（绿色图标）
- [ ] 鼠标悬停在Buff图标上，查看Buff详情（名称、描述、剩余回合数）
- [ ] 在角色详情弹窗中查看Buff列表

#### 3.2 Buff持续时间测试
- [ ] 使用Buff技能后，观察Buff持续时间
- [ ] 每回合后确认Buff持续时间减少
- [ ] 确认Buff在持续时间结束后消失

#### 3.3 Buff叠加规则测试
- [ ] 使用相同类型的Buff（refresh规则）
  - 确认新Buff刷新持续时间，但不叠加数值
- [ ] 使用不同类型Buff（stack规则）
  - 确认Buff数值叠加
- [ ] 使用替换类型Buff（replace规则）
  - 确认新Buff完全替换旧Buff

#### 3.4 Debuff测试
- [ ] 对敌人使用Debuff技能
- [ ] 观察战斗日志中的Debuff应用信息
- [ ] 确认Debuff效果正确（如降低防御、降低攻击等）

### 4. 被动技能触发测试

#### 4.1 被动技能显示测试
- [ ] 打开角色详情弹窗
- [ ] 查看"被动技能"列表
- [ ] 确认被动技能名称、等级、效果正确显示

#### 4.2 被动技能触发测试
- [ ] **on_hit触发**: 攻击时触发（如血之狂热）
  - 观察战斗日志中是否出现被动技能触发信息
  - 确认HP恢复等效果生效
- [ ] **on_crit触发**: 暴击时触发
  - 观察暴击时是否触发被动效果
- [ ] **on_kill触发**: 击杀敌人时触发
  - 击败敌人后，观察是否触发被动效果
- [ ] **on_damage_taken触发**: 受到伤害时触发（如反击）
  - 受到伤害时，观察是否触发被动效果
- [ ] **on_skill_use触发**: 使用技能时触发
  - 使用技能后，观察是否触发被动效果

### 5. 技能升级系统测试

#### 5.1 技能经验获取测试
- [ ] 使用技能后，技能获得经验
- [ ] 在角色详情弹窗中查看技能信息
- [ ] 确认技能经验值增加

#### 5.2 技能升级测试
- [ ] 持续使用技能，积累经验
- [ ] 当经验达到要求时，技能自动升级
- [ ] 确认技能等级提升
- [ ] 确认技能效果数值增长（如伤害提升）

#### 5.3 技能升级效果测试
- [ ] 技能升级后，使用技能
- [ ] 确认升级后的技能效果更强（如伤害更高）

### 6. 战斗日志测试

#### 6.1 日志类型测试
- [ ] 确认不同类型的日志有不同颜色：
  - 战斗信息（黄色）
  - 伤害（红色）
  - 治疗（绿色）
  - DOT（红色）
  - HOT（绿色）
  - Buff/Debuff（浅绿色/浅红色）
  - 闪避（青色）
  - 暴击（粉红色）
  - 系统信息（绿色）

#### 6.2 日志内容测试
- [ ] 确认日志包含完整信息：
  - 角色名称
  - 技能名称
  - 伤害/治疗数值
  - 目标名称
  - 特殊效果（暴击、闪避等）

### 7. 战斗流程测试

#### 7.1 完整战斗流程
- [ ] 开始战斗
- [ ] 观察战斗日志中的"开始战斗"信息
- [ ] 观察回合进行
- [ ] 观察技能使用、Buff应用、被动触发
- [ ] 观察DOT/HOT效果触发
- [ ] 击败敌人后，观察掉落物品和经验获得
- [ ] 观察战斗结束信息（包含回合数、耗时等）

#### 7.2 战斗结束条件测试
- [ ] 角色死亡时，战斗结束
- [ ] 所有敌人被击败时，战斗结束
- [ ] 观察战斗总结信息

### 8. 多角色战斗测试

#### 8.1 队伍战斗测试
- [ ] 创建多个角色
- [ ] 开始战斗，确认所有角色都参与战斗
- [ ] 观察每个角色的行动
- [ ] 确认每个角色的Buff/Debuff独立显示
- [ ] 确认每个角色的HP/MP独立显示

#### 8.2 仇恨系统测试
- [ ] 观察怪物攻击目标
- [ ] 确认怪物优先攻击仇恨最高的角色（通常是造成伤害最多的角色）

## 🐛 常见问题排查

### 问题1: 战斗不开始
- **检查**: 确认后端服务正在运行（`http://localhost:8080`）
- **检查**: 确认前端服务正在运行（`http://localhost:5173`）
- **检查**: 打开浏览器开发者工具，查看控制台错误
- **检查**: 确认已创建角色

### 问题2: Buff不显示
- **检查**: 确认使用了Buff技能
- **检查**: 刷新页面，重新获取角色数据
- **检查**: 打开角色详情弹窗，查看Buff列表

### 问题3: DOT/HOT效果不触发
- **检查**: 确认技能配置中包含DOT/HOT效果
- **检查**: 观察战斗日志，查找DOT/HOT相关日志
- **检查**: 确认Buff持续时间未结束

### 问题4: 被动技能不触发
- **检查**: 确认角色已学习被动技能
- **检查**: 打开角色详情弹窗，查看被动技能列表
- **检查**: 观察战斗日志，查找被动技能触发信息

### 问题5: 技能不升级
- **检查**: 确认技能已使用多次
- **检查**: 打开角色详情弹窗，查看技能经验值
- **检查**: 确认技能经验达到升级要求

## 📊 测试数据建议

### 测试角色配置
- **战士**: 高HP，物理攻击，适合测试Buff和被动技能
- **法师**: 魔法攻击，适合测试魔法伤害和技能升级
- **盗贼**: 高速度，适合测试回合顺序和闪避

### 测试技能配置
- **战斗怒吼**: 测试Buff系统
- **盾牌格挡**: 测试减伤Buff
- **治疗技能**: 测试HOT效果
- **毒药技能**: 测试DOT效果

## 📝 测试报告模板

测试完成后，请记录：

1. **测试日期**: 
2. **测试人员**: 
3. **测试环境**: 
   - 后端版本: 
   - 前端版本: 
   - 浏览器: 
4. **测试结果**: 
   - 通过的功能: 
   - 失败的功能: 
   - 发现的问题: 
5. **问题详情**: 
   - 问题描述: 
   - 复现步骤: 
   - 预期结果: 
   - 实际结果: 

## 🎯 下一步

完成基础功能测试后，可以测试：
- 地图系统
- 装备系统
- 交易系统
- 成就系统
- 排名系统




