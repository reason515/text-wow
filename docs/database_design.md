# Text WoW æ•°æ®åº“è®¾è®¡æ–‡æ¡£

## ğŸ“Š æ•°æ®åº“æ¦‚è§ˆ

### ğŸ® æ ¸å¿ƒè®¾è®¡ï¼š5äººå°é˜Ÿç³»ç»Ÿ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ç”¨æˆ·å°é˜Ÿç»“æ„                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                          â”‚
â”‚    â”‚  USER   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                          â”‚               â”‚
â”‚         â”‚                                               â”‚               â”‚
â”‚         â”‚ 1:N (æœ€å¤š5ä¸ª)                                 â”‚               â”‚
â”‚         â–¼                                               â–¼               â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚    â”‚                        å°é˜Ÿ (Team)                           â”‚     â”‚
â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚     â”‚
â”‚    â”‚  â”‚ Slot 1 â”‚ â”‚ Slot 2 â”‚ â”‚ Slot 3 â”‚ â”‚ Slot 4 â”‚ â”‚ Slot 5 â”‚    â”‚     â”‚
â”‚    â”‚  â”‚ é˜Ÿé•¿   â”‚ â”‚ æˆå‘˜   â”‚ â”‚ æˆå‘˜   â”‚ â”‚ æˆå‘˜   â”‚ â”‚ æˆå‘˜   â”‚    â”‚     â”‚
â”‚    â”‚  â”‚ æˆ˜å£«   â”‚ â”‚ æ³•å¸ˆ   â”‚ â”‚ ç‰§å¸ˆ   â”‚ â”‚ (ç©º)   â”‚ â”‚ (ç©º)   â”‚    â”‚     â”‚
â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚     â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å°é˜Ÿè§„åˆ™ï¼š**
- åˆå§‹åªæœ‰1ä¸ªè§’è‰²æ§½ä½ï¼Œéœ€è§£é”æ›´å¤š
- æœ€å¤šå¯è§£é”5ä¸ªè§’è‰²æ§½ä½
- è§’è‰²é€šè¿‡ `team_slot` (1-5) ç¡®å®šä½ç½®
- `is_active` æ§åˆ¶æ˜¯å¦å‚ä¸æˆ˜æ–—
- é‡‘å¸å°é˜Ÿå…±äº«ï¼Œç»éªŒå¹³å‡åˆ†é…

**æ§½ä½è§£é”æ¡ä»¶ï¼ˆå»ºè®®ï¼‰ï¼š**
| æ§½ä½ | è§£é”æ¡ä»¶ |
|-----|---------|
| 1 | åˆå§‹æ‹¥æœ‰ |
| 2 | é˜Ÿä¼ä¸­ä»»æ„è§’è‰²è¾¾åˆ° 10 çº§ |
| 3 | é˜Ÿä¼ä¸­ä»»æ„è§’è‰²è¾¾åˆ° 20 çº§ |
| 4 | é˜Ÿä¼ä¸­ä»»æ„è§’è‰²è¾¾åˆ° 35 çº§ |
| 5 | é˜Ÿä¼ä¸­ä»»æ„è§’è‰²è¾¾åˆ° 50 çº§ |

**æ­»äº¡ä¸å¤æ´»æœºåˆ¶ï¼š**
- è§’è‰²æ­»äº¡åéœ€è¦ç­‰å¾…å¤æ´»
- å¤æ´»æ—¶é—´ = åŸºç¡€æ—¶é—´ Ã— å½“å‰æ­»äº¡è§’è‰²æ•°é‡
- ç©å®¶éœ€é€šè¿‡ç­–ç•¥é…ç½®å°½é‡é¿å…è§’è‰²æ­»äº¡

| æ­»äº¡äººæ•° | å¤æ´»ç­‰å¾…æ—¶é—´(å»ºè®®) |
|---------|------------------|
| 1äººæ­»äº¡ | 30ç§’ |
| 2äººæ­»äº¡ | 60ç§’ (æ¯äºº) |
| 3äººæ­»äº¡ | 90ç§’ (æ¯äºº) |
| 4äººæ­»äº¡ | 120ç§’ (æ¯äºº) |
| 5äººå…¨ç­ | 180ç§’ (æ¯äºº) |

> ğŸ’¡ è¿™ä¸ªæœºåˆ¶é¼“åŠ±ç©å®¶åˆç†é…ç½®ç­–ç•¥ï¼ˆå¦‚ä½è¡€é‡æ—¶ä½¿ç”¨æ²»ç–—æŠ€èƒ½ï¼‰ï¼Œè€Œä¸æ˜¯æ— è„‘æŒ‚æœº

### ğŸ“ æ•°æ®åº“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         TEXT WoW æ•°æ®åº“æ¶æ„                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” 1:N â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚  users  â”‚â”€â”€â”€â”€â–ºâ”‚ characters  â”‚â”€â”€â”€â”€â–ºâ”‚  inventory  â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚ (æœ€å¤š5ä¸ª)   â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                                        â”‚
â”‚                         â”‚                                               â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚
â”‚         â–¼               â–¼               â–¼                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚  â”‚  equipment  â”‚ â”‚char_skills  â”‚ â”‚ strategies  â”‚                       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                                                                         â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• æ¸¸æˆé…ç½®è¡¨ï¼ˆåªè¯»ï¼‰â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•            â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  races  â”‚  â”‚ classes â”‚  â”‚  items  â”‚  â”‚ skills  â”‚  â”‚  zones  â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜      â”‚
â”‚                                                           â”‚            â”‚
â”‚                                                    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚                                                    â”‚  monsters   â”‚     â”‚
â”‚                                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“‹ è¡¨ç»“æ„è®¾è®¡

### 1. users - ç”¨æˆ·è¡¨

| å­—æ®µ | ç±»å‹ | çº¦æŸ | è¯´æ˜ |
|-----|------|-----|------|
| id | INTEGER | PRIMARY KEY AUTOINCREMENT | ç”¨æˆ·ID |
| username | VARCHAR(32) | UNIQUE NOT NULL | ç”¨æˆ·å |
| password_hash | VARCHAR(256) | NOT NULL | å¯†ç å“ˆå¸Œ |
| email | VARCHAR(128) | UNIQUE | é‚®ç®±ï¼ˆå¯é€‰ï¼‰ |
| max_team_size | INTEGER | DEFAULT 5 | æœ€å¤§é˜Ÿä¼äººæ•°ä¸Šé™ |
| unlocked_slots | INTEGER | DEFAULT 1 | å·²è§£é”æ§½ä½æ•°(åˆå§‹1ä¸ª) |
| gold | INTEGER | DEFAULT 0 | é‡‘å¸(å°é˜Ÿå…±äº«) |
| current_zone_id | VARCHAR(32) | DEFAULT 'elwynn' | å½“å‰åŒºåŸŸ(å°é˜Ÿå…±äº«) |
| created_at | DATETIME | DEFAULT CURRENT_TIMESTAMP | æ³¨å†Œæ—¶é—´ |
| last_login_at | DATETIME | | æœ€åç™»å½•æ—¶é—´ |
| status | INTEGER | DEFAULT 1 | çŠ¶æ€: 1æ­£å¸¸ 0ç¦ç”¨ |

```sql
CREATE TABLE users (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    username VARCHAR(32) UNIQUE NOT NULL,
    password_hash VARCHAR(256) NOT NULL,
    email VARCHAR(128) UNIQUE,
    max_team_size INTEGER DEFAULT 5,
    unlocked_slots INTEGER DEFAULT 1,  -- å·²è§£é”æ§½ä½æ•°(åˆå§‹1ä¸ª)
    gold INTEGER DEFAULT 0,
    current_zone_id VARCHAR(32) DEFAULT 'elwynn',
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    last_login_at DATETIME,
    status INTEGER DEFAULT 1
);

CREATE INDEX idx_users_username ON users(username);
```

---

### 2. characters - è§’è‰²è¡¨

> ğŸ“Œ **å°é˜Ÿç³»ç»Ÿ**: æ¯ä¸ªç”¨æˆ·å¯ä»¥æ‹¥æœ‰æœ€å¤š5ä¸ªè§’è‰²ç»„æˆå°é˜Ÿï¼Œå…±åŒå‚ä¸æˆ˜æ–—ã€‚

| å­—æ®µ | ç±»å‹ | çº¦æŸ | è¯´æ˜ |
|-----|------|-----|------|
| id | INTEGER | PRIMARY KEY AUTOINCREMENT | è§’è‰²ID |
| user_id | INTEGER | NOT NULL FK | æ‰€å±ç”¨æˆ· |
| name | VARCHAR(32) | NOT NULL | è§’è‰²å |
| race_id | VARCHAR(32) | NOT NULL | ç§æ—ID |
| class_id | VARCHAR(32) | NOT NULL | èŒä¸šID |
| faction | VARCHAR(16) | NOT NULL | é˜µè¥: alliance/horde |
| team_slot | INTEGER | NOT NULL | é˜Ÿä¼ä½ç½®: 1-5 (1=é˜Ÿé•¿) |
| is_active | INTEGER | DEFAULT 1 | æ˜¯å¦å‡ºæˆ˜: 1æ˜¯ 0å¦ |
| is_dead | INTEGER | DEFAULT 0 | æ˜¯å¦æ­»äº¡: 1æ˜¯ 0å¦ |
| revive_at | DATETIME | NULL | å¤æ´»æ—¶é—´(NULLè¡¨ç¤ºå­˜æ´») |
| level | INTEGER | DEFAULT 1 | ç­‰çº§ |
| exp | INTEGER | DEFAULT 0 | å½“å‰ç»éªŒ |
| exp_to_next | INTEGER | DEFAULT 100 | å‡çº§æ‰€éœ€ç»éªŒ |
| hp | INTEGER | NOT NULL | å½“å‰ç”Ÿå‘½å€¼ |
| max_hp | INTEGER | NOT NULL | æœ€å¤§ç”Ÿå‘½å€¼ |
| mp | INTEGER | NOT NULL | å½“å‰æ³•åŠ›å€¼ |
| max_mp | INTEGER | NOT NULL | æœ€å¤§æ³•åŠ›å€¼ |
| strength | INTEGER | DEFAULT 10 | åŠ›é‡ |
| agility | INTEGER | DEFAULT 10 | æ•æ· |
| intellect | INTEGER | DEFAULT 10 | æ™ºåŠ› |
| stamina | INTEGER | DEFAULT 10 | è€åŠ› |
| spirit | INTEGER | DEFAULT 10 | ç²¾ç¥ |
| attack | INTEGER | DEFAULT 10 | æ”»å‡»åŠ› |
| defense | INTEGER | DEFAULT 5 | é˜²å¾¡åŠ› |
| crit_rate | REAL | DEFAULT 0.05 | æš´å‡»ç‡ |
| crit_damage | REAL | DEFAULT 1.5 | æš´å‡»ä¼¤å®³å€ç‡ |
| current_zone_id | VARCHAR(32) | DEFAULT 'elwynn' | å½“å‰åŒºåŸŸ(è·Ÿéšé˜Ÿé•¿) |
| total_kills | INTEGER | DEFAULT 0 | æ€»å‡»æ€æ•° |
| total_deaths | INTEGER | DEFAULT 0 | æ€»æ­»äº¡æ•° |
| total_exp_gained | INTEGER | DEFAULT 0 | æ€»è·å¾—ç»éªŒ |
| total_gold_gained | INTEGER | DEFAULT 0 | æ€»è·å¾—é‡‘å¸ |
| play_time | INTEGER | DEFAULT 0 | æ¸¸æˆæ—¶é•¿(ç§’) |
| offline_time | DATETIME | | ç¦»çº¿æ—¶é—´ |
| created_at | DATETIME | DEFAULT CURRENT_TIMESTAMP | åˆ›å»ºæ—¶é—´ |
| updated_at | DATETIME | DEFAULT CURRENT_TIMESTAMP | æ›´æ–°æ—¶é—´ |

```sql
CREATE TABLE characters (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    user_id INTEGER NOT NULL,
    name VARCHAR(32) NOT NULL,
    race_id VARCHAR(32) NOT NULL,
    class_id VARCHAR(32) NOT NULL,
    faction VARCHAR(16) NOT NULL,
    team_slot INTEGER NOT NULL,
    is_active INTEGER DEFAULT 1,
    level INTEGER DEFAULT 1,
    exp INTEGER DEFAULT 0,
    exp_to_next INTEGER DEFAULT 100,
    hp INTEGER NOT NULL,
    max_hp INTEGER NOT NULL,
    mp INTEGER NOT NULL,
    max_mp INTEGER NOT NULL,
    strength INTEGER DEFAULT 10,
    agility INTEGER DEFAULT 10,
    intellect INTEGER DEFAULT 10,
    stamina INTEGER DEFAULT 10,
    spirit INTEGER DEFAULT 10,
    attack INTEGER DEFAULT 10,
    defense INTEGER DEFAULT 5,
    crit_rate REAL DEFAULT 0.05,
    crit_damage REAL DEFAULT 1.5,
    gold INTEGER DEFAULT 0,
    current_zone_id VARCHAR(32) DEFAULT 'elwynn',
    total_kills INTEGER DEFAULT 0,
    total_deaths INTEGER DEFAULT 0,
    total_exp_gained INTEGER DEFAULT 0,
    total_gold_gained INTEGER DEFAULT 0,
    play_time INTEGER DEFAULT 0,
    offline_time DATETIME,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,
    UNIQUE(user_id, team_slot)
);

CREATE INDEX idx_characters_user_id ON characters(user_id);
CREATE INDEX idx_characters_level ON characters(level);
CREATE INDEX idx_characters_team ON characters(user_id, team_slot);
```

---

### 3. races - ç§æ—é…ç½®è¡¨

> ğŸ“Œ **ç§æ—å·®å¼‚åŒ–**: æ¯ä¸ªç§æ—æœ‰ç‹¬ç‰¹çš„å±æ€§åŠ æˆã€ä¸»åŠ¨æŠ€èƒ½å’Œè¢«åŠ¨ç‰¹æ€§

| å­—æ®µ | ç±»å‹ | çº¦æŸ | è¯´æ˜ |
|-----|------|-----|------|
| id | VARCHAR(32) | PRIMARY KEY | ç§æ—ID |
| name | VARCHAR(32) | NOT NULL | ç§æ—åç§° |
| faction | VARCHAR(16) | NOT NULL | é˜µè¥ |
| description | TEXT | | æè¿° |
| strength_base | INTEGER | DEFAULT 0 | åŠ›é‡åŸºç¡€åŠ æˆ(å›ºå®šå€¼) |
| strength_pct | REAL | DEFAULT 0 | åŠ›é‡ç™¾åˆ†æ¯”åŠ æˆ |
| agility_base | INTEGER | DEFAULT 0 | æ•æ·åŸºç¡€åŠ æˆ |
| agility_pct | REAL | DEFAULT 0 | æ•æ·ç™¾åˆ†æ¯”åŠ æˆ |
| intellect_base | INTEGER | DEFAULT 0 | æ™ºåŠ›åŸºç¡€åŠ æˆ |
| intellect_pct | REAL | DEFAULT 0 | æ™ºåŠ›ç™¾åˆ†æ¯”åŠ æˆ |
| stamina_base | INTEGER | DEFAULT 0 | è€åŠ›åŸºç¡€åŠ æˆ |
| stamina_pct | REAL | DEFAULT 0 | è€åŠ›ç™¾åˆ†æ¯”åŠ æˆ |
| spirit_base | INTEGER | DEFAULT 0 | ç²¾ç¥åŸºç¡€åŠ æˆ |
| spirit_pct | REAL | DEFAULT 0 | ç²¾ç¥ç™¾åˆ†æ¯”åŠ æˆ |
| racial_passive_id | VARCHAR(32) | | ç§æ—è¢«åŠ¨ç‰¹æ€§1 |
| racial_passive2_id | VARCHAR(32) | | ç§æ—è¢«åŠ¨ç‰¹æ€§2 |
| allowed_classes | TEXT | | å¯é€‰èŒä¸š(JSONæ•°ç»„,nullä¸ºå…¨éƒ¨) |

```sql
CREATE TABLE races (
    id VARCHAR(32) PRIMARY KEY,
    name VARCHAR(32) NOT NULL,
    faction VARCHAR(16) NOT NULL,
    description TEXT,
    -- åŸºç¡€åŠ æˆ(å›ºå®šå€¼ï¼Œåˆ›å»ºæ—¶ä¸€æ¬¡æ€§åŠ )
    strength_base INTEGER DEFAULT 0,
    agility_base INTEGER DEFAULT 0,
    intellect_base INTEGER DEFAULT 0,
    stamina_base INTEGER DEFAULT 0,
    spirit_base INTEGER DEFAULT 0,
    -- ç™¾åˆ†æ¯”åŠ æˆ(ä¹˜ç®—ï¼Œéšç­‰çº§ä¿æŒæ„ä¹‰)
    strength_pct REAL DEFAULT 0,
    agility_pct REAL DEFAULT 0,
    intellect_pct REAL DEFAULT 0,
    stamina_pct REAL DEFAULT 0,
    spirit_pct REAL DEFAULT 0,
    -- è¢«åŠ¨ç‰¹æ€§
    racial_passive_id VARCHAR(32),
    racial_passive2_id VARCHAR(32),
    allowed_classes TEXT,
    FOREIGN KEY (racial_passive_id) REFERENCES effects(id),
    FOREIGN KEY (racial_passive2_id) REFERENCES effects(id)
);
```

### ç§æ—å·®å¼‚åŒ–è®¾è®¡

> ğŸ“Œ **æ”¾ç½®æ¸¸æˆé€‚é…**: æ‰€æœ‰ç§æ—ç‰¹æ€§éƒ½è®¾è®¡ä¸ºè‡ªåŠ¨è§¦å‘æˆ–è¢«åŠ¨æ•ˆæœï¼Œé€‚åˆæŒ‚æœºåœºæ™¯

#### å±æ€§åŠ æˆæœºåˆ¶

**é‡‡ç”¨"åŸºç¡€å€¼ + ç™¾åˆ†æ¯”"æ··åˆæ–¹æ¡ˆï¼š**

| ç»„æˆéƒ¨åˆ† | è¯´æ˜ | ç¤ºä¾‹(å…½äººåŠ›é‡) |
|---------|------|--------------|
| åŸºç¡€åŠ æˆ | åˆ›å»ºè§’è‰²æ—¶ä¸€æ¬¡æ€§åŠ æˆ | +5ç‚¹åŠ›é‡ |
| ç™¾åˆ†æ¯”åŠ æˆ | è¯¥å±æ€§æ€»å€¼çš„é¢å¤–åŠ æˆ | +5%åŠ›é‡ |

**è®¡ç®—å…¬å¼ï¼š**
```
æœ€ç»ˆå±æ€§ = (åŸºç¡€å±æ€§ + èŒä¸šæˆé•¿ Ã— ç­‰çº§ + è£…å¤‡åŠ æˆ) Ã— (1 + ç§æ—ç™¾åˆ†æ¯”åŠ æˆ)
```

**ç¤ºä¾‹è®¡ç®—ï¼ˆå…½äººæˆ˜å£« Lv.30ï¼‰ï¼š**
```
åŸºç¡€åŠ›é‡ = 15 (èŒä¸šåŸºç¡€)
ç­‰çº§æˆé•¿ = 2 Ã— 30 = 60
ç§æ—åŸºç¡€ = +5
è£…å¤‡åŠ æˆ = +20 (å‡è®¾)
å°è®¡ = 15 + 60 + 5 + 20 = 100

ç§æ—ç™¾åˆ†æ¯” = +5%
æœ€ç»ˆåŠ›é‡ = 100 Ã— 1.05 = 105

vs äººç±»æˆ˜å£«: 100 Ã— 1.00 = 100 (å·®5ç‚¹ï¼Œçº¦5%)
```

è¿™æ ·è®¾è®¡çš„å¥½å¤„ï¼š
- âœ… åˆæœŸå·®å¼‚æ˜æ˜¾ï¼ˆåŸºç¡€å€¼ï¼‰
- âœ… åæœŸä»æœ‰æ„ä¹‰ï¼ˆç™¾åˆ†æ¯”ï¼‰
- âœ… å·®è·ä¸ä¼šè¿‡äºæ‚¬æ®Šï¼ˆåªæœ‰5%å·¦å³ï¼‰

---

**è”ç›Ÿç§æ—:**

| ç§æ— | å±æ€§åŠ æˆ | è¢«åŠ¨ç‰¹æ€§1 | è¢«åŠ¨ç‰¹æ€§2 |
|-----|---------|---------|---------|
| **äººç±»** | ç²¾ç¥+3, ç²¾ç¥+3% | ğŸ’¡ é€‚åº”åŠ›ï¼šç»éªŒè·å–+10% | ğŸ—¡ï¸ å‰‘æœ¯ä¸“ç²¾ï¼šç‰©ç†ä¼¤å®³+3% |
| **çŸ®äºº** | åŠ›é‡+3, è€åŠ›+5% | â„ï¸ éœœæŠ—ï¼šå†°éœœä¼¤å®³-15% | ğŸ›¡ï¸ çŸ³è‚¤ï¼šå—åˆ°æš´å‡»ä¼¤å®³-10% |
| **æš—å¤œç²¾çµ** | æ•æ·+5, æ•æ·+3% | ğŸŒ™ æš—å½±ä¹‹å¿ƒï¼šä¼¤å®³+5% | ğŸ‘ï¸ æ•é”ï¼šé—ªé¿ç‡+2% |
| **ä¾å„’** | æ™ºåŠ›+5, æ™ºåŠ›+5% | âš¡ çµå·§å¿ƒæ™ºï¼šæ³•æœ¯æš´å‡»+3% | ğŸ”§ å·¥ç¨‹ä¸“ç²¾ï¼šå¯¹æœºæ¢°æ€ªä¼¤å®³+15% |

**éƒ¨è½ç§æ—:**

| ç§æ— | å±æ€§åŠ æˆ | è¢«åŠ¨ç‰¹æ€§1 | è¢«åŠ¨ç‰¹æ€§2 |
|-----|---------|---------|---------|
| **å…½äºº** | åŠ›é‡+5, åŠ›é‡+5% | ğŸ’¢ å—œè¡€ï¼šHP<30%æ—¶æ”»å‡»+15% | ğŸ’ª åšéŸ§ï¼šçœ©æ™•æ—¶é—´-25% |
| **äº¡çµ** | æ™ºåŠ›+3, æš—å½±ä¼¤å®³+5% | ğŸ’€ äº¡è€…ä¹‹è§¦ï¼šæ”»å‡»5%å‡ ç‡ææƒ§ | ğŸŒ‘ æš—å½±æŠ—æ€§ï¼šæš—å½±ä¼¤å®³-15% |
| **ç‰›å¤´äºº** | è€åŠ›+5, æœ€å¤§HP+5% | â¤ï¸ åšå¿ï¼šé˜²å¾¡+3% | ğŸŒ¿ è‡ªç„¶äº²å’Œï¼šå—åˆ°æ²»ç–—+10% |
| **å·¨é­”** | æ•æ·+3, æ”»é€Ÿ+5% | ğŸ’š å†ç”Ÿï¼šæ¯å›åˆæ¢å¤2%HP | ğŸ¾ é‡å…½æ€æ‰‹ï¼šé‡å…½ä¼¤å®³+15% |

**ç§æ—ç‰¹æ€§è§¦å‘æœºåˆ¶:**
- æ‰€æœ‰ç‰¹æ€§éƒ½æ˜¯è¢«åŠ¨æ•ˆæœï¼Œæ— éœ€ç©å®¶æ“ä½œ
- å±æ€§åŠ æˆåœ¨è®¡ç®—é¢æ¿æ—¶è‡ªåŠ¨åº”ç”¨
- æˆ˜æ–—ç‰¹æ€§ç”±æˆ˜æ–—å¼•æ“è‡ªåŠ¨æ£€æµ‹è§¦å‘

---

### 4. classes - èŒä¸šé…ç½®è¡¨

| å­—æ®µ | ç±»å‹ | çº¦æŸ | è¯´æ˜ |
|-----|------|-----|------|
| id | VARCHAR(32) | PRIMARY KEY | èŒä¸šID |
| name | VARCHAR(32) | NOT NULL | èŒä¸šåç§° |
| description | TEXT | | æè¿° |
| role | VARCHAR(16) | NOT NULL | å®šä½: tank/dps/healer |
| primary_stat | VARCHAR(16) | NOT NULL | ä¸»å±æ€§ |
| base_hp | INTEGER | NOT NULL | åŸºç¡€HP |
| base_mp | INTEGER | NOT NULL | åŸºç¡€MP |
| hp_per_level | INTEGER | NOT NULL | æ¯çº§HPæˆé•¿ |
| mp_per_level | INTEGER | NOT NULL | æ¯çº§MPæˆé•¿ |
| base_strength | INTEGER | DEFAULT 10 | åŸºç¡€åŠ›é‡ |
| base_agility | INTEGER | DEFAULT 10 | åŸºç¡€æ•æ· |
| base_intellect | INTEGER | DEFAULT 10 | åŸºç¡€æ™ºåŠ› |
| base_stamina | INTEGER | DEFAULT 10 | åŸºç¡€è€åŠ› |
| base_spirit | INTEGER | DEFAULT 10 | åŸºç¡€ç²¾ç¥ |

```sql
CREATE TABLE classes (
    id VARCHAR(32) PRIMARY KEY,
    name VARCHAR(32) NOT NULL,
    description TEXT,
    role VARCHAR(16) NOT NULL,
    primary_stat VARCHAR(16) NOT NULL,
    base_hp INTEGER NOT NULL,
    base_mp INTEGER NOT NULL,
    hp_per_level INTEGER NOT NULL,
    mp_per_level INTEGER NOT NULL,
    base_strength INTEGER DEFAULT 10,
    base_agility INTEGER DEFAULT 10,
    base_intellect INTEGER DEFAULT 10,
    base_stamina INTEGER DEFAULT 10,
    base_spirit INTEGER DEFAULT 10
);
```

---

### 5. skills - æŠ€èƒ½é…ç½®è¡¨

> ğŸ“Œ **Buff/Debuffæœºåˆ¶**: æ‰€æœ‰å¢ç›Š/å‡ç›Šæ•ˆæœä»…åœ¨æˆ˜æ–—ä¸­ç”Ÿæ•ˆï¼Œæ¯åœºæˆ˜æ–—å¼€å§‹å‰è‡ªåŠ¨æ¸…ç©ºã€‚

| å­—æ®µ | ç±»å‹ | çº¦æŸ | è¯´æ˜ |
|-----|------|-----|------|
| id | VARCHAR(32) | PRIMARY KEY | æŠ€èƒ½ID |
| name | VARCHAR(32) | NOT NULL | æŠ€èƒ½åç§° |
| description | TEXT | | æè¿° |
| icon | VARCHAR(64) | | å›¾æ ‡æ ‡è¯†(é¢„ç•™) |
| class_id | VARCHAR(32) | | æ‰€å±èŒä¸š(nullä¸ºé€šç”¨) |
| type | VARCHAR(16) | NOT NULL | ç±»å‹(è§ä¸‹è¡¨) |
| target_type | VARCHAR(16) | NOT NULL | ç›®æ ‡ç±»å‹(è§ä¸‹è¡¨) |
| damage_type | VARCHAR(16) | | ä¼¤å®³ç±»å‹: physical/magic/true/nature/fire/frost/shadow/holy |
| base_value | INTEGER | DEFAULT 0 | åŸºç¡€æ•°å€¼(ä¼¤å®³/æ²»ç–—/æ•ˆæœå¼ºåº¦) |
| scaling_stat | VARCHAR(16) | | æˆé•¿å±æ€§: strength/agility/intellect/spirit |
| scaling_ratio | REAL | DEFAULT 1.0 | å±æ€§åŠ æˆç³»æ•° |
| mp_cost | INTEGER | DEFAULT 0 | æ³•åŠ›æ¶ˆè€— |
| cooldown | INTEGER | DEFAULT 0 | å†·å´æ—¶é—´(å›åˆ) |
| level_required | INTEGER | DEFAULT 1 | éœ€æ±‚ç­‰çº§ |
| effect_id | VARCHAR(32) | | é™„åŠ æ•ˆæœID(å…³è”effectsè¡¨) |
| effect_chance | REAL | DEFAULT 1.0 | æ•ˆæœè§¦å‘æ¦‚ç‡(0-1) |
| tags | TEXT | | æ ‡ç­¾(JSONæ•°ç»„ï¼Œç”¨äºåˆ†ç±»ç­›é€‰) |

**æŠ€èƒ½ç±»å‹ (type):**
| ç±»å‹ | è¯´æ˜ |
|-----|------|
| `attack` | é€ æˆä¼¤å®³ |
| `heal` | æ¢å¤ç”Ÿå‘½ |
| `buff` | å¢ç›Šæ•ˆæœ |
| `debuff` | å‡ç›Šæ•ˆæœ |
| `dot` | æŒç»­ä¼¤å®³(Damage over Time) |
| `hot` | æŒç»­æ²»ç–—(Heal over Time) |
| `shield` | ä¼¤å®³å¸æ”¶æŠ¤ç›¾ |
| `summon` | å¬å”¤(é¢„ç•™) |
| `dispel` | é©±æ•£æ•ˆæœ |
| `interrupt` | æ‰“æ–­æ–½æ³• |
| `control` | æ§åˆ¶(çœ©æ™•/æ²‰é»˜ç­‰) |

**ç›®æ ‡ç±»å‹ (target_type):**
| ç±»å‹ | è¯´æ˜ |
|-----|------|
| `self` | è‡ªèº« |
| `ally` | å‹æ–¹å•ä½“ |
| `ally_all` | å‹æ–¹å…¨ä½“ |
| `ally_lowest_hp` | è¡€é‡æœ€ä½çš„å‹æ–¹ |
| `enemy` | æ•Œæ–¹å•ä½“ |
| `enemy_all` | æ•Œæ–¹å…¨ä½“ |
| `enemy_random` | éšæœºæ•Œäºº |
| `enemy_lowest_hp` | è¡€é‡æœ€ä½çš„æ•Œäºº |

---

### 5.1 effects - æ•ˆæœé…ç½®è¡¨(Buff/Debuff)

> ğŸ“Œ **æ‰©å±•æ€§è®¾è®¡**: é€šè¿‡ç‹¬ç«‹çš„æ•ˆæœè¡¨ï¼Œæ”¯æŒæŠ€èƒ½é™„å¸¦å„ç§å¤æ‚æ•ˆæœ

| å­—æ®µ | ç±»å‹ | çº¦æŸ | è¯´æ˜ |
|-----|------|-----|------|
| id | VARCHAR(32) | PRIMARY KEY | æ•ˆæœID |
| name | VARCHAR(32) | NOT NULL | æ•ˆæœåç§° |
| description | TEXT | | æè¿° |
| icon | VARCHAR(64) | | å›¾æ ‡æ ‡è¯†(é¢„ç•™) |
| type | VARCHAR(16) | NOT NULL | æ•ˆæœç±»å‹(è§ä¸‹è¡¨) |
| is_buff | INTEGER | NOT NULL | 1=å¢ç›Š 0=å‡ç›Š |
| is_stackable | INTEGER | DEFAULT 0 | æ˜¯å¦å¯å åŠ  |
| max_stacks | INTEGER | DEFAULT 1 | æœ€å¤§å åŠ å±‚æ•° |
| duration | INTEGER | NOT NULL | æŒç»­å›åˆæ•° |
| tick_interval | INTEGER | DEFAULT 1 | è§¦å‘é—´éš”(å›åˆ) |
| value_type | VARCHAR(16) | | æ•°å€¼ç±»å‹: flat/percent |
| value | REAL | | æ•ˆæœæ•°å€¼ |
| stat_affected | VARCHAR(32) | | å½±å“çš„å±æ€§ |
| damage_type | VARCHAR(16) | | DOTä¼¤å®³ç±»å‹ |
| can_dispel | INTEGER | DEFAULT 1 | æ˜¯å¦å¯é©±æ•£ |
| tags | TEXT | | æ ‡ç­¾(JSONæ•°ç»„) |

**æ•ˆæœç±»å‹ (type):**
| ç±»å‹ | è¯´æ˜ | ç¤ºä¾‹ |
|-----|------|-----|
| `stat_mod` | å±æ€§ä¿®æ”¹ | æ”»å‡»åŠ›+10% |
| `dot` | æŒç»­ä¼¤å®³ | ä¸­æ¯’ã€ç‡ƒçƒ§ |
| `hot` | æŒç»­æ²»ç–— | å›æ˜¥æœ¯ |
| `shield` | ä¼¤å®³å¸æ”¶ | çœŸè¨€æœ¯:ç›¾ |
| `stun` | çœ©æ™• | æ— æ³•è¡ŒåŠ¨ |
| `silence` | æ²‰é»˜ | æ— æ³•æ–½æ³• |
| `slow` | å‡é€Ÿ | æ”»å‡»é€Ÿåº¦é™ä½(é¢„ç•™) |
| `root` | å®šèº« | æ— æ³•ç§»åŠ¨(é¢„ç•™) |
| `taunt` | å˜²è®½ | å¼ºåˆ¶æ”»å‡»è‡ªå·± |
| `immunity` | å…ç–« | å…ç–«æŸç±»ä¼¤å®³ |
| `reflect` | åå°„ | åå¼¹ä¼¤å®³ |
| `lifesteal` | å¸è¡€ | é€ æˆä¼¤å®³æ—¶å›è¡€ |
| `thorns` | è†æ£˜ | è¢«æ”»å‡»æ—¶åä¼¤ |
| `stealth` | æ½œè¡Œ | éšèº«çŠ¶æ€ |
| `invulnerable` | æ— æ•Œ | å…ç–«æ‰€æœ‰ä¼¤å®³ |

**å¯å½±å“çš„å±æ€§ (stat_affected):**
- `attack` - æ”»å‡»åŠ›
- `defense` - é˜²å¾¡åŠ›
- `max_hp` - æœ€å¤§ç”Ÿå‘½å€¼
- `max_mp` - æœ€å¤§æ³•åŠ›å€¼
- `crit_rate` - æš´å‡»ç‡
- `crit_damage` - æš´å‡»ä¼¤å®³
- `hit_rate` - å‘½ä¸­ç‡(é¢„ç•™)
- `dodge_rate` - é—ªé¿ç‡(é¢„ç•™)
- `damage_taken` - å—åˆ°çš„ä¼¤å®³
- `damage_dealt` - é€ æˆçš„ä¼¤å®³
- `healing_taken` - å—åˆ°çš„æ²»ç–—
- `healing_done` - é€ æˆçš„æ²»ç–—

```sql
CREATE TABLE skills (
    id VARCHAR(32) PRIMARY KEY,
    name VARCHAR(32) NOT NULL,
    description TEXT,
    class_id VARCHAR(32),
    type VARCHAR(16) NOT NULL,
    target VARCHAR(16) NOT NULL,
    damage_type VARCHAR(16),
    base_damage INTEGER DEFAULT 0,
    damage_scaling REAL DEFAULT 1.0,
    mp_cost INTEGER DEFAULT 0,
    cooldown INTEGER DEFAULT 0,
    level_required INTEGER DEFAULT 1,
    effect_type VARCHAR(32),
    effect_value REAL,
    effect_duration INTEGER,
    FOREIGN KEY (class_id) REFERENCES classes(id)
);

CREATE INDEX idx_skills_class_id ON skills(class_id);
```

---

### 6. character_skills - è§’è‰²æŠ€èƒ½è¡¨

| å­—æ®µ | ç±»å‹ | çº¦æŸ | è¯´æ˜ |
|-----|------|-----|------|
| id | INTEGER | PRIMARY KEY AUTOINCREMENT | ID |
| character_id | INTEGER | NOT NULL FK | è§’è‰²ID |
| skill_id | VARCHAR(32) | NOT NULL FK | æŠ€èƒ½ID |
| skill_level | INTEGER | DEFAULT 1 | æŠ€èƒ½ç­‰çº§ |
| slot | INTEGER | | æŠ€èƒ½æ§½ä½(nullä¸ºæœªè£…å¤‡) |
| is_auto | INTEGER | DEFAULT 1 | è‡ªåŠ¨é‡Šæ”¾: 1æ˜¯ 0å¦ |

```sql
CREATE TABLE character_skills (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    character_id INTEGER NOT NULL,
    skill_id VARCHAR(32) NOT NULL,
    skill_level INTEGER DEFAULT 1,
    slot INTEGER,
    is_auto INTEGER DEFAULT 1,
    FOREIGN KEY (character_id) REFERENCES characters(id) ON DELETE CASCADE,
    FOREIGN KEY (skill_id) REFERENCES skills(id),
    UNIQUE(character_id, skill_id)
);

CREATE INDEX idx_char_skills_char_id ON character_skills(character_id);
```

---

### 7. items - ç‰©å“é…ç½®è¡¨

| å­—æ®µ | ç±»å‹ | çº¦æŸ | è¯´æ˜ |
|-----|------|-----|------|
| id | VARCHAR(32) | PRIMARY KEY | ç‰©å“ID |
| name | VARCHAR(64) | NOT NULL | ç‰©å“åç§° |
| description | TEXT | | æè¿° |
| type | VARCHAR(16) | NOT NULL | ç±»å‹: equipment/consumable/material/quest |
| subtype | VARCHAR(16) | | å­ç±»å‹ |
| quality | VARCHAR(16) | DEFAULT 'common' | å“è´¨: common/uncommon/rare/epic/legendary |
| level_required | INTEGER | DEFAULT 1 | éœ€æ±‚ç­‰çº§ |
| class_required | VARCHAR(32) | | éœ€æ±‚èŒä¸š |
| slot | VARCHAR(16) | | è£…å¤‡æ§½ä½ |
| stackable | INTEGER | DEFAULT 0 | å¯å †å : 1æ˜¯ 0å¦ |
| max_stack | INTEGER | DEFAULT 1 | æœ€å¤§å †å æ•° |
| sell_price | INTEGER | DEFAULT 0 | å”®ä»· |
| buy_price | INTEGER | DEFAULT 0 | è´­ä¹°ä»· |
| strength | INTEGER | DEFAULT 0 | åŠ›é‡åŠ æˆ |
| agility | INTEGER | DEFAULT 0 | æ•æ·åŠ æˆ |
| intellect | INTEGER | DEFAULT 0 | æ™ºåŠ›åŠ æˆ |
| stamina | INTEGER | DEFAULT 0 | è€åŠ›åŠ æˆ |
| spirit | INTEGER | DEFAULT 0 | ç²¾ç¥åŠ æˆ |
| attack | INTEGER | DEFAULT 0 | æ”»å‡»åŠ æˆ |
| defense | INTEGER | DEFAULT 0 | é˜²å¾¡åŠ æˆ |
| hp_bonus | INTEGER | DEFAULT 0 | HPåŠ æˆ |
| mp_bonus | INTEGER | DEFAULT 0 | MPåŠ æˆ |
| crit_rate | REAL | DEFAULT 0 | æš´å‡»ç‡åŠ æˆ |
| effect_type | VARCHAR(32) | | ä½¿ç”¨æ•ˆæœç±»å‹ |
| effect_value | INTEGER | | ä½¿ç”¨æ•ˆæœæ•°å€¼ |

```sql
CREATE TABLE items (
    id VARCHAR(32) PRIMARY KEY,
    name VARCHAR(64) NOT NULL,
    description TEXT,
    type VARCHAR(16) NOT NULL,
    subtype VARCHAR(16),
    quality VARCHAR(16) DEFAULT 'common',
    level_required INTEGER DEFAULT 1,
    class_required VARCHAR(32),
    slot VARCHAR(16),
    stackable INTEGER DEFAULT 0,
    max_stack INTEGER DEFAULT 1,
    sell_price INTEGER DEFAULT 0,
    buy_price INTEGER DEFAULT 0,
    strength INTEGER DEFAULT 0,
    agility INTEGER DEFAULT 0,
    intellect INTEGER DEFAULT 0,
    stamina INTEGER DEFAULT 0,
    spirit INTEGER DEFAULT 0,
    attack INTEGER DEFAULT 0,
    defense INTEGER DEFAULT 0,
    hp_bonus INTEGER DEFAULT 0,
    mp_bonus INTEGER DEFAULT 0,
    crit_rate REAL DEFAULT 0,
    effect_type VARCHAR(32),
    effect_value INTEGER
);

CREATE INDEX idx_items_type ON items(type);
CREATE INDEX idx_items_quality ON items(quality);
```

**è£…å¤‡æ§½ä½ (slot) å®šä¹‰:**
- `head` - å¤´éƒ¨
- `shoulder` - è‚©éƒ¨
- `chest` - èƒ¸ç”²
- `hands` - æ‰‹å¥—
- `legs` - è…¿éƒ¨
- `feet` - è„šéƒ¨
- `main_hand` - ä¸»æ‰‹æ­¦å™¨
- `off_hand` - å‰¯æ‰‹
- `neck` - é¡¹é“¾
- `ring` - æˆ’æŒ‡
- `trinket` - é¥°å“

---

### 8. inventory - èƒŒåŒ…è¡¨

| å­—æ®µ | ç±»å‹ | çº¦æŸ | è¯´æ˜ |
|-----|------|-----|------|
| id | INTEGER | PRIMARY KEY AUTOINCREMENT | ID |
| character_id | INTEGER | NOT NULL FK | è§’è‰²ID |
| item_id | VARCHAR(32) | NOT NULL FK | ç‰©å“ID |
| quantity | INTEGER | DEFAULT 1 | æ•°é‡ |
| slot | INTEGER | | èƒŒåŒ…æ§½ä½ |

```sql
CREATE TABLE inventory (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    character_id INTEGER NOT NULL,
    item_id VARCHAR(32) NOT NULL,
    quantity INTEGER DEFAULT 1,
    slot INTEGER,
    FOREIGN KEY (character_id) REFERENCES characters(id) ON DELETE CASCADE,
    FOREIGN KEY (item_id) REFERENCES items(id)
);

CREATE INDEX idx_inventory_char_id ON inventory(character_id);
```

---

### 9. equipment - è£…å¤‡è¡¨

| å­—æ®µ | ç±»å‹ | çº¦æŸ | è¯´æ˜ |
|-----|------|-----|------|
| id | INTEGER | PRIMARY KEY AUTOINCREMENT | ID |
| character_id | INTEGER | NOT NULL FK | è§’è‰²ID |
| slot | VARCHAR(16) | NOT NULL | è£…å¤‡æ§½ä½ |
| item_id | VARCHAR(32) | NOT NULL FK | ç‰©å“ID |

```sql
CREATE TABLE equipment (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    character_id INTEGER NOT NULL,
    slot VARCHAR(16) NOT NULL,
    item_id VARCHAR(32) NOT NULL,
    FOREIGN KEY (character_id) REFERENCES characters(id) ON DELETE CASCADE,
    FOREIGN KEY (item_id) REFERENCES items(id),
    UNIQUE(character_id, slot)
);

CREATE INDEX idx_equipment_char_id ON equipment(character_id);
```

---

### 10. zones - åŒºåŸŸé…ç½®è¡¨

| å­—æ®µ | ç±»å‹ | çº¦æŸ | è¯´æ˜ |
|-----|------|-----|------|
| id | VARCHAR(32) | PRIMARY KEY | åŒºåŸŸID |
| name | VARCHAR(64) | NOT NULL | åŒºåŸŸåç§° |
| description | TEXT | | æè¿° |
| min_level | INTEGER | DEFAULT 1 | æœ€ä½ç­‰çº§ |
| max_level | INTEGER | DEFAULT 60 | æœ€é«˜ç­‰çº§ |
| faction | VARCHAR(16) | | é˜µè¥é™åˆ¶ |
| parent_zone_id | VARCHAR(32) | | çˆ¶åŒºåŸŸ |
| exp_modifier | REAL | DEFAULT 1.0 | ç»éªŒå€ç‡ |
| gold_modifier | REAL | DEFAULT 1.0 | é‡‘å¸å€ç‡ |
| drop_modifier | REAL | DEFAULT 1.0 | æ‰è½å€ç‡ |
| is_dungeon | INTEGER | DEFAULT 0 | æ˜¯å¦å‰¯æœ¬ |
| unlock_condition | TEXT | | è§£é”æ¡ä»¶(JSON) |

```sql
CREATE TABLE zones (
    id VARCHAR(32) PRIMARY KEY,
    name VARCHAR(64) NOT NULL,
    description TEXT,
    min_level INTEGER DEFAULT 1,
    max_level INTEGER DEFAULT 60,
    faction VARCHAR(16),
    parent_zone_id VARCHAR(32),
    exp_modifier REAL DEFAULT 1.0,
    gold_modifier REAL DEFAULT 1.0,
    drop_modifier REAL DEFAULT 1.0,
    is_dungeon INTEGER DEFAULT 0,
    unlock_condition TEXT,
    FOREIGN KEY (parent_zone_id) REFERENCES zones(id)
);
```

---

### 11. monsters - æ€ªç‰©é…ç½®è¡¨

| å­—æ®µ | ç±»å‹ | çº¦æŸ | è¯´æ˜ |
|-----|------|-----|------|
| id | VARCHAR(32) | PRIMARY KEY | æ€ªç‰©ID |
| zone_id | VARCHAR(32) | NOT NULL FK | æ‰€å±åŒºåŸŸ |
| name | VARCHAR(64) | NOT NULL | æ€ªç‰©åç§° |
| description | TEXT | | æè¿° |
| level | INTEGER | NOT NULL | ç­‰çº§ |
| type | VARCHAR(16) | DEFAULT 'normal' | ç±»å‹: normal/elite/boss |
| hp | INTEGER | NOT NULL | ç”Ÿå‘½å€¼ |
| mp | INTEGER | DEFAULT 0 | æ³•åŠ›å€¼ |
| attack | INTEGER | NOT NULL | æ”»å‡»åŠ› |
| defense | INTEGER | NOT NULL | é˜²å¾¡åŠ› |
| exp_reward | INTEGER | NOT NULL | ç»éªŒå¥–åŠ± |
| gold_min | INTEGER | DEFAULT 0 | æœ€å°é‡‘å¸ |
| gold_max | INTEGER | DEFAULT 0 | æœ€å¤§é‡‘å¸ |
| spawn_weight | INTEGER | DEFAULT 100 | ç”Ÿæˆæƒé‡ |
| skills | TEXT | | æŠ€èƒ½åˆ—è¡¨(JSON) |

```sql
CREATE TABLE monsters (
    id VARCHAR(32) PRIMARY KEY,
    zone_id VARCHAR(32) NOT NULL,
    name VARCHAR(64) NOT NULL,
    description TEXT,
    level INTEGER NOT NULL,
    type VARCHAR(16) DEFAULT 'normal',
    hp INTEGER NOT NULL,
    mp INTEGER DEFAULT 0,
    attack INTEGER NOT NULL,
    defense INTEGER NOT NULL,
    exp_reward INTEGER NOT NULL,
    gold_min INTEGER DEFAULT 0,
    gold_max INTEGER DEFAULT 0,
    spawn_weight INTEGER DEFAULT 100,
    skills TEXT,
    FOREIGN KEY (zone_id) REFERENCES zones(id)
);

CREATE INDEX idx_monsters_zone_id ON monsters(zone_id);
CREATE INDEX idx_monsters_level ON monsters(level);
```

---

### 12. monster_drops - æ€ªç‰©æ‰è½è¡¨

| å­—æ®µ | ç±»å‹ | çº¦æŸ | è¯´æ˜ |
|-----|------|-----|------|
| id | INTEGER | PRIMARY KEY AUTOINCREMENT | ID |
| monster_id | VARCHAR(32) | NOT NULL FK | æ€ªç‰©ID |
| item_id | VARCHAR(32) | NOT NULL FK | ç‰©å“ID |
| drop_rate | REAL | NOT NULL | æ‰è½ç‡(0-1) |
| min_quantity | INTEGER | DEFAULT 1 | æœ€å°æ•°é‡ |
| max_quantity | INTEGER | DEFAULT 1 | æœ€å¤§æ•°é‡ |

```sql
CREATE TABLE monster_drops (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    monster_id VARCHAR(32) NOT NULL,
    item_id VARCHAR(32) NOT NULL,
    drop_rate REAL NOT NULL,
    min_quantity INTEGER DEFAULT 1,
    max_quantity INTEGER DEFAULT 1,
    FOREIGN KEY (monster_id) REFERENCES monsters(id),
    FOREIGN KEY (item_id) REFERENCES items(id)
);

CREATE INDEX idx_monster_drops_monster_id ON monster_drops(monster_id);
```

---

### 13. battle_strategies - æˆ˜æ–—ç­–ç•¥è¡¨

| å­—æ®µ | ç±»å‹ | çº¦æŸ | è¯´æ˜ |
|-----|------|-----|------|
| id | INTEGER | PRIMARY KEY AUTOINCREMENT | ID |
| character_id | INTEGER | NOT NULL FK | è§’è‰²ID |
| name | VARCHAR(32) | NOT NULL | ç­–ç•¥åç§° |
| priority | INTEGER | NOT NULL | ä¼˜å…ˆçº§(è¶Šå°è¶Šä¼˜å…ˆ) |
| condition_type | VARCHAR(32) | NOT NULL | æ¡ä»¶ç±»å‹ |
| condition_operator | VARCHAR(8) | NOT NULL | æ¯”è¾ƒè¿ç®—ç¬¦ |
| condition_value | REAL | NOT NULL | æ¡ä»¶æ•°å€¼ |
| action_type | VARCHAR(32) | NOT NULL | åŠ¨ä½œç±»å‹ |
| action_target | VARCHAR(32) | | åŠ¨ä½œç›®æ ‡ |
| skill_id | VARCHAR(32) | | ä½¿ç”¨æŠ€èƒ½ |
| item_id | VARCHAR(32) | | ä½¿ç”¨ç‰©å“ |
| is_active | INTEGER | DEFAULT 1 | æ˜¯å¦æ¿€æ´» |

```sql
CREATE TABLE battle_strategies (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    character_id INTEGER NOT NULL,
    name VARCHAR(32) NOT NULL,
    priority INTEGER NOT NULL,
    condition_type VARCHAR(32) NOT NULL,
    condition_operator VARCHAR(8) NOT NULL,
    condition_value REAL NOT NULL,
    action_type VARCHAR(32) NOT NULL,
    action_target VARCHAR(32),
    skill_id VARCHAR(32),
    item_id VARCHAR(32),
    is_active INTEGER DEFAULT 1,
    FOREIGN KEY (character_id) REFERENCES characters(id) ON DELETE CASCADE,
    FOREIGN KEY (skill_id) REFERENCES skills(id),
    FOREIGN KEY (item_id) REFERENCES items(id)
);

CREATE INDEX idx_strategies_char_id ON battle_strategies(character_id);
```

**æ¡ä»¶ç±»å‹ (condition_type):**
- `self_hp_percent` - è‡ªèº«HPç™¾åˆ†æ¯”
- `self_mp_percent` - è‡ªèº«MPç™¾åˆ†æ¯”
- `enemy_hp_percent` - æ•ŒäººHPç™¾åˆ†æ¯”
- `battle_round` - æˆ˜æ–—å›åˆæ•°
- `always` - å§‹ç»ˆè§¦å‘

**åŠ¨ä½œç±»å‹ (action_type):**
- `use_skill` - ä½¿ç”¨æŠ€èƒ½
- `use_item` - ä½¿ç”¨ç‰©å“
- `normal_attack` - æ™®é€šæ”»å‡»
- `flee` - é€ƒè·‘

---

### 14. game_sessions - æ¸¸æˆä¼šè¯è¡¨

| å­—æ®µ | ç±»å‹ | çº¦æŸ | è¯´æ˜ |
|-----|------|-----|------|
| id | INTEGER | PRIMARY KEY AUTOINCREMENT | ID |
| character_id | INTEGER | NOT NULL FK | è§’è‰²ID |
| session_start | DATETIME | NOT NULL | ä¼šè¯å¼€å§‹ |
| session_end | DATETIME | | ä¼šè¯ç»“æŸ |
| kills | INTEGER | DEFAULT 0 | å‡»æ€æ•° |
| exp_gained | INTEGER | DEFAULT 0 | è·å¾—ç»éªŒ |
| gold_gained | INTEGER | DEFAULT 0 | è·å¾—é‡‘å¸ |
| deaths | INTEGER | DEFAULT 0 | æ­»äº¡æ¬¡æ•° |

```sql
CREATE TABLE game_sessions (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    character_id INTEGER NOT NULL,
    session_start DATETIME NOT NULL,
    session_end DATETIME,
    kills INTEGER DEFAULT 0,
    exp_gained INTEGER DEFAULT 0,
    gold_gained INTEGER DEFAULT 0,
    deaths INTEGER DEFAULT 0,
    FOREIGN KEY (character_id) REFERENCES characters(id) ON DELETE CASCADE
);

CREATE INDEX idx_sessions_char_id ON game_sessions(character_id);
```

---

## ğŸ”— ER å…³ç³»å›¾

```
                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚    users     â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                           â”‚ 1:N
                                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    N:1    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    1:N    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   races     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚       characters         â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚  inventory  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚                               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    N:1                  â”‚                               â”‚ N:1
â”‚  classes    â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                               â–¼
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                        â”‚                        â”‚    items    â”‚
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â””â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”˜
                          â”‚             â”‚             â”‚                 â”‚
                          â–¼             â–¼             â–¼                 â”‚
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
                   â”‚ equipment  â”‚ â”‚char_skillsâ”‚ â”‚strategies â”‚          â”‚
                   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
                         â”‚              â”‚                              â”‚
                         â”‚ N:1          â”‚ N:1                          â”‚
                         â–¼              â–¼                              â”‚
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
                  â”‚    items    â”‚ â”‚   skills    â”‚                      â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
                                                                       â”‚
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” 1:N â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” N:1 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚    zones    â”‚â”€â”€â”€â”€â–ºâ”‚  monsters   â”‚â”€â”€â”€â”€â–ºâ”‚monster_dropsâ”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š åˆå§‹æ•°æ®

### ç§æ—æ•°æ®

```sql
INSERT INTO races (id, name, faction, description, strength_mod, agility_mod, intellect_mod, stamina_mod, spirit_mod) VALUES
('human', 'äººç±»', 'alliance', 'é€‚åº”åŠ›å¼ºçš„ç§æ—ï¼Œå„é¡¹å±æ€§å¹³è¡¡ã€‚', 1, 0, 0, 0, 1),
('dwarf', 'çŸ®äºº', 'alliance', 'åšéŸ§çš„å±±åœ°ç§æ—ï¼Œæ“…é•¿è¿‘æˆ˜å’Œå·¥è‰ºã€‚', 2, 0, 0, 2, 0),
('nightelf', 'æš—å¤œç²¾çµ', 'alliance', 'å¤è€çš„ç²¾çµç§æ—ï¼Œä¸è‡ªç„¶å’Œè°å…±å­˜ã€‚', 0, 2, 0, 0, 1),
('gnome', 'ä¾å„’', 'alliance', 'èªæ˜çš„å°å‹ç§æ—ï¼Œæ“…é•¿é­”æ³•å’Œæœºæ¢°ã€‚', 0, 0, 3, 0, 0),
('orc', 'å…½äºº', 'horde', 'å¼ºå£®çš„æˆ˜å£«ç§æ—ï¼Œå´‡å°šåŠ›é‡å’Œè£è€€ã€‚', 3, 0, 0, 1, 0),
('undead', 'äº¡çµ', 'horde', 'ä¸æ­»çš„å­˜åœ¨ï¼Œå¯¹æš—å½±é­”æ³•æœ‰å¤©èµ‹ã€‚', 0, 0, 2, 0, 2),
('tauren', 'ç‰›å¤´äºº', 'horde', 'é«˜å¤§æ¸©å’Œçš„ç§æ—ï¼Œä¸å¤§åœ°ä¹‹æ¯ç›¸è¿ã€‚', 2, 0, 0, 2, 1),
('troll', 'å·¨é­”', 'horde', 'æ•æ·çš„ä¸›æ—ç§æ—ï¼Œæ‹¥æœ‰å¿«é€Ÿå†ç”Ÿèƒ½åŠ›ã€‚', 0, 2, 0, 1, 0);
```

### èŒä¸šæ•°æ®

```sql
INSERT INTO classes (id, name, description, role, primary_stat, base_hp, base_mp, hp_per_level, mp_per_level, base_strength, base_agility, base_intellect, base_stamina, base_spirit) VALUES
('warrior', 'æˆ˜å£«', 'è¿‘æˆ˜æ ¼æ–—ä¸“å®¶ï¼Œå¯ä»¥æ‰¿å—å¤§é‡ä¼¤å®³ã€‚', 'tank', 'strength', 120, 20, 12, 2, 15, 10, 5, 14, 8),
('paladin', 'åœ£éª‘å£«', 'ç¥åœ£æˆ˜å£«ï¼Œå¯ä»¥æ²»ç–—å’Œä¿æŠ¤ç›Ÿå‹ã€‚', 'tank', 'strength', 110, 60, 10, 6, 13, 8, 10, 13, 12),
('hunter', 'çŒäºº', 'è¿œç¨‹ç‰©ç†æ”»å‡»è€…ï¼Œä¸å® ç‰©å¹¶è‚©ä½œæˆ˜ã€‚', 'dps', 'agility', 90, 40, 8, 4, 8, 15, 8, 10, 10),
('rogue', 'ç›—è´¼', 'æ½œè¡Œåˆºå®¢ï¼Œæ“…é•¿è¿å‡»å’Œçˆ†å‘ä¼¤å®³ã€‚', 'dps', 'agility', 85, 50, 7, 5, 10, 16, 6, 9, 8),
('priest', 'ç‰§å¸ˆ', 'æ²»ç–—è€…å’Œæš—å½±æ–½æ³•è€…ã€‚', 'healer', 'intellect', 70, 100, 5, 12, 5, 6, 15, 8, 16),
('mage', 'æ³•å¸ˆ', 'å¼ºå¤§çš„å¥¥æœ¯æ–½æ³•è€…ï¼Œæ“…é•¿èŒƒå›´ä¼¤å®³ã€‚', 'dps', 'intellect', 65, 120, 4, 15, 4, 6, 18, 6, 12),
('warlock', 'æœ¯å£«', 'é»‘æš—é­”æ³•å¸ˆï¼Œå¬å”¤æ¶é­”ä½œæˆ˜ã€‚', 'dps', 'intellect', 75, 110, 5, 13, 5, 6, 17, 8, 10),
('druid', 'å¾·é²ä¼Š', 'è‡ªç„¶çš„å®ˆæŠ¤è€…ï¼Œå¯å˜å½¢ä¸ºå¤šç§å½¢æ€ã€‚', 'dps', 'intellect', 85, 80, 7, 10, 10, 10, 13, 10, 12),
('shaman', 'è¨æ»¡', 'å…ƒç´ çš„æ“æ§è€…ï¼Œå¯æ²»ç–—å’Œå¢ç›Šã€‚', 'dps', 'intellect', 90, 90, 8, 10, 12, 8, 14, 11, 12);
```

---

## ğŸ“ˆ ç´¢å¼•ç­–ç•¥

| è¡¨ | ç´¢å¼• | ç”¨é€” |
|---|------|-----|
| users | username | ç™»å½•æŸ¥è¯¢ |
| characters | user_id | ç”¨æˆ·è§’è‰²æŸ¥è¯¢ |
| characters | level | æ’è¡Œæ¦œ |
| inventory | character_id | èƒŒåŒ…æŸ¥è¯¢ |
| equipment | character_id | è£…å¤‡æŸ¥è¯¢ |
| character_skills | character_id | æŠ€èƒ½æŸ¥è¯¢ |
| monsters | zone_id | åŒºåŸŸæ€ªç‰©æŸ¥è¯¢ |
| monsters | level | ç­‰çº§åŒ¹é… |
| battle_strategies | character_id | ç­–ç•¥æŸ¥è¯¢ |

---

## ğŸ”’ æ•°æ®å®Œæ•´æ€§

1. **å¤–é”®çº¦æŸ** - æ‰€æœ‰å…³è”ä½¿ç”¨å¤–é”®ï¼ŒCASCADEåˆ é™¤
2. **å”¯ä¸€çº¦æŸ** - ç”¨æˆ·åã€è£…å¤‡æ§½ä½ç­‰
3. **é»˜è®¤å€¼** - æ‰€æœ‰æ•°å€¼å­—æ®µè®¾ç½®åˆç†é»˜è®¤å€¼
4. **è§¦å‘å™¨** - è‡ªåŠ¨æ›´æ–° updated_at æ—¶é—´æˆ³

```sql
-- è‡ªåŠ¨æ›´æ–° updated_at è§¦å‘å™¨
CREATE TRIGGER update_character_timestamp 
AFTER UPDATE ON characters
BEGIN
    UPDATE characters SET updated_at = CURRENT_TIMESTAMP WHERE id = NEW.id;
END;
```

---

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **SQLite ç‰¹æ€§**
   - ä½¿ç”¨ WAL æ¨¡å¼æé«˜å¹¶å‘æ€§èƒ½
   - VARCHAR å®é™…ç­‰åŒäº TEXT
   - å¤–é”®éœ€è¦æ‰‹åŠ¨å¼€å¯: `PRAGMA foreign_keys = ON`

2. **æ‰©å±•æ€§è€ƒè™‘**
   - IDä½¿ç”¨VARCHARä¾¿äºé…ç½®æ•°æ®ç®¡ç†
   - é¢„ç•™äº†JSONå­—æ®µç”¨äºçµæ´»æ‰©å±•
   - ç»Ÿè®¡å­—æ®µåˆ†ç¦»ï¼Œé¿å…é¢‘ç¹æ›´æ–°ä¸»è¡¨

3. **è¿ç§»åˆ°å…¶ä»–æ•°æ®åº“**
   - è¡¨ç»“æ„å…¼å®¹ MySQL/PostgreSQL
   - éœ€è°ƒæ•´è‡ªå¢è¯­æ³•å’Œéƒ¨åˆ†æ•°æ®ç±»å‹

