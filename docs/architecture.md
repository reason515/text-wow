# Text WoW ç³»ç»Ÿæ¶æ„æ–‡æ¡£

> ğŸ“Œ **æ ¸å¿ƒè®¾è®¡ç†å¿µ**: æ¸…æ™°çš„ç³»ç»Ÿåˆ†å±‚ã€æ¨¡å—åŒ–è®¾è®¡ã€é…ç½®åŒ–å¹³è¡¡ã€æ˜“äºæ‰©å±•

---

## ğŸ“‹ ç›®å½•

1. [ç³»ç»Ÿæ¶æ„æ¦‚è§ˆ](#ç³»ç»Ÿæ¶æ„æ¦‚è§ˆ)
2. [ç³»ç»Ÿåˆ†å±‚æ¶æ„](#ç³»ç»Ÿåˆ†å±‚æ¶æ„)
3. [æ ¸å¿ƒç³»ç»Ÿæ¨¡å—](#æ ¸å¿ƒç³»ç»Ÿæ¨¡å—)
4. [ç³»ç»Ÿä¾èµ–å…³ç³»](#ç³»ç»Ÿä¾èµ–å…³ç³»)
5. [æ•°æ®æµè®¾è®¡](#æ•°æ®æµè®¾è®¡)
6. [é…ç½®åŒ–è®¾è®¡](#é…ç½®åŒ–è®¾è®¡)
7. [æ¥å£å®šä¹‰](#æ¥å£å®šä¹‰)
8. [æœªæ¥æ‰©å±•æ¥å£](#æœªæ¥æ‰©å±•æ¥å£)

---

## ç³»ç»Ÿæ¶æ„æ¦‚è§ˆ

Text WoW é‡‡ç”¨åˆ†å±‚æ¶æ„è®¾è®¡ï¼Œå°†ç³»ç»Ÿåˆ†ä¸ºè¡¨ç°å±‚ã€ä¸šåŠ¡é€»è¾‘å±‚ã€æ•°æ®è®¿é—®å±‚å’Œæ•°æ®æŒä¹…å±‚ã€‚æ ¸å¿ƒè®¾è®¡åŸåˆ™ï¼š

- **æ¨¡å—åŒ–**: æ¯ä¸ªç³»ç»Ÿç‹¬ç«‹ï¼Œé€šè¿‡æ¥å£äº¤äº’
- **é…ç½®åŒ–**: æ¸¸æˆå¹³è¡¡æ•°æ®é€šè¿‡é…ç½®è¡¨ç®¡ç†ï¼Œæ— éœ€ä»£ç ä¿®æ”¹
- **å¯æ‰©å±•**: é¢„ç•™æ‰©å±•æ¥å£ï¼Œæ”¯æŒæœªæ¥åŠŸèƒ½æ·»åŠ 
- **æ˜“ç»´æŠ¤**: æ¸…æ™°çš„ä¾èµ–å…³ç³»ï¼Œé™ä½ç³»ç»Ÿå¤æ‚åº¦

---

## ç³»ç»Ÿåˆ†å±‚æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    è¡¨ç°å±‚ (Presentation)                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  å‰ç«¯UIç»„ä»¶   â”‚  â”‚  API Handlers â”‚  â”‚  WebSocket   â”‚     â”‚
â”‚  â”‚  Vue 3       â”‚  â”‚  Gin Router  â”‚  â”‚  (å¯é€‰)      â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“ HTTP/WebSocket
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ä¸šåŠ¡é€»è¾‘å±‚ (Domain)                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  æˆ˜æ–—ç³»ç»Ÿ     â”‚  â”‚  è§’è‰²ç³»ç»Ÿ     â”‚  â”‚  è£…å¤‡ç³»ç»Ÿâ­    â”‚     â”‚
â”‚  â”‚ BattleManagerâ”‚  â”‚ CharacterMgr  â”‚  â”‚ EquipmentMgr â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  æŠ€èƒ½ç³»ç»Ÿ     â”‚  â”‚  ç­–ç•¥ç³»ç»Ÿ     â”‚  â”‚  æ•°å€¼è®¡ç®—     â”‚     â”‚
â”‚  â”‚ SkillManager â”‚  â”‚ StrategyExec  â”‚  â”‚ Calculator   â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  é˜Ÿä¼ç³»ç»Ÿ     â”‚  â”‚  æˆ˜æ–—ç»Ÿè®¡     â”‚  â”‚  ç»æµç³»ç»Ÿ     â”‚     â”‚
â”‚  â”‚  TeamManager â”‚  â”‚ BattleStats  â”‚  â”‚ EconomyMgr   â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  æ€ªç‰©ç³»ç»Ÿ     â”‚  â”‚  åœ°å›¾ç³»ç»Ÿ     â”‚  â”‚  é…ç½®ç®¡ç†     â”‚     â”‚
â”‚  â”‚ MonsterMgr    â”‚  â”‚  ZoneManager  â”‚  â”‚ ConfigMgr    â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    æ•°æ®è®¿é—®å±‚ (Repository)                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ CharacterRepoâ”‚  â”‚ EquipmentRepoâ”‚  â”‚  BattleRepo   â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ MonsterRepo  â”‚  â”‚  ConfigRepo  â”‚  â”‚  StatsRepo   â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    æ•°æ®æŒä¹…å±‚ (Database)                      â”‚
â”‚                    SQLite (WAL Mode)                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  æ¸¸æˆæ•°æ®è¡¨   â”‚  â”‚  é…ç½®æ•°æ®è¡¨   â”‚  â”‚  ç»Ÿè®¡æ•°æ®è¡¨   â”‚     â”‚
â”‚  â”‚  (ç”¨æˆ·/è§’è‰²)  â”‚  â”‚  (æ€ªç‰©/æŠ€èƒ½)  â”‚  â”‚  (æˆ˜æ–—ç»Ÿè®¡)   â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## æ ¸å¿ƒç³»ç»Ÿæ¨¡å—

### åŸºç¡€ç³»ç»Ÿï¼ˆæ— ä¾èµ–ï¼‰

#### 1. æ•°å€¼è®¡ç®—ç³»ç»Ÿ (Calculator System)
- **èŒè´£**: ç»Ÿä¸€çš„æ•°å€¼è®¡ç®—é€»è¾‘
- **æ ¸å¿ƒç±»**: `DamageCalculator`, `AttributeConverter`, `DefenseCalculator`
- **æ–‡ä»¶**: `server/internal/game/calculator.go`
- **ç‰¹ç‚¹**: çº¯è®¡ç®—é€»è¾‘ï¼Œæ— çŠ¶æ€ï¼Œæ— ä¾èµ–

#### 2. é…ç½®ç®¡ç†ç³»ç»Ÿ (Config System)
- **èŒè´£**: ç®¡ç†æ‰€æœ‰æ¸¸æˆé…ç½®æ•°æ®ï¼ˆæ€ªç‰©ã€æŠ€èƒ½ã€è£…å¤‡ç­‰ï¼‰
- **æ ¸å¿ƒç±»**: `ConfigManager`, `ConfigLoader`
- **æ–‡ä»¶**: `server/internal/config/`
- **ç‰¹ç‚¹**: 
  - é…ç½®æ•°æ®å­˜å‚¨åœ¨æ•°æ®åº“é…ç½®è¡¨ä¸­
  - æ”¯æŒçƒ­æ›´æ–°ï¼ˆæ— éœ€é‡å¯ï¼‰
  - ç‰ˆæœ¬åŒ–ç®¡ç†ï¼Œä¾¿äºå›æ»š
  - å‡å°‘æ•°æ®è¿ç§»å¤æ‚åº¦

### æ ¸å¿ƒç³»ç»Ÿï¼ˆæŒ‰ä¼˜å…ˆçº§ï¼‰

#### 3. è§’è‰²ç³»ç»Ÿ (Character System) - åŸºç¡€
- **èŒè´£**: è§’è‰²å±æ€§ç®¡ç†ã€å±æ€§ç‚¹åˆ†é…ã€ç­‰çº§æˆé•¿
- **æ ¸å¿ƒç±»**: `CharacterManager`, `AttributeCalculator`
- **ä¾èµ–**: æ•°å€¼è®¡ç®—ç³»ç»Ÿ
- **æ–‡ä»¶**: `server/internal/game/character_manager.go`

#### 4. æ€ªç‰©ç³»ç»Ÿ (Monster System) - ä¼˜å…ˆçº§0 â­
- **èŒè´£**: æ€ªç‰©ç®¡ç†ã€æ€ªç‰©ç”Ÿæˆã€æ€ªç‰©AIã€å¹³è¡¡æ€§é…ç½®
- **æ ¸å¿ƒç±»**: `MonsterManager`, `MonsterGenerator`, `MonsterAI`
- **ä¾èµ–**: é…ç½®ç®¡ç†ç³»ç»Ÿã€æ•°å€¼è®¡ç®—ç³»ç»Ÿ
- **æ–‡ä»¶**: `server/internal/game/monster_manager.go` (å¾…åˆ›å»º)
- **è®¾è®¡æ–‡æ¡£**: `docs/monster_system_design.md` (å¾…åˆ›å»º)
- **ç‰¹ç‚¹**:
  - **ä¸°å¯Œçš„æ€ªç‰©ç±»å‹**: ä¸åŒæ€ªç‰©æœ‰ä¸åŒçš„æŠ€èƒ½ã€å±æ€§ã€è¡Œä¸ºæ¨¡å¼
  - **é…ç½®åŒ–å¹³è¡¡**: æ€ªç‰©å¼ºåº¦ã€æ‰è½ç‡ç­‰é€šè¿‡é…ç½®è¡¨ç®¡ç†
  - **é¿å…ä¸€æ‹›èµ°éå¤©ä¸‹**: ä¸åŒæ€ªç‰©éœ€è¦ä¸åŒç­–ç•¥åº”å¯¹
  - **æ–¹ä¾¿è°ƒæ•´**: ä¿®æ”¹é…ç½®è¡¨å³å¯è°ƒæ•´ï¼Œæ— éœ€ä»£ç ä¿®æ”¹
  - **æ€ªç‰©åˆ†ç±»**:
    - æ™®é€šæ€ªç‰© (Normal): åŸºç¡€å±æ€§ï¼Œç®€å•AI
    - ç²¾è‹±æ€ªç‰© (Elite): å¢å¼ºå±æ€§ï¼Œç‰¹æ®ŠæŠ€èƒ½
    - Bossæ€ªç‰© (Boss): é«˜å±æ€§ï¼Œå¤æ‚æŠ€èƒ½ç»„åˆ
    - ç‰¹æ®Šæ€ªç‰© (Special): ç‹¬ç‰¹æœºåˆ¶ï¼Œç‰¹æ®ŠæŒ‘æˆ˜

#### 5. æˆ˜æ–—ç³»ç»Ÿ (Battle System) - ä¼˜å…ˆçº§1 â­
- **èŒè´£**: æˆ˜æ–—æµç¨‹æ§åˆ¶ã€å›åˆç®¡ç†ã€ä¼¤å®³è®¡ç®—ã€å¤šè§’è‰²æˆ˜æ–—æ”¯æŒ
- **æ ¸å¿ƒç±»**: `BattleManager`, `BattleCalculator`, `TeamBattleManager`
- **ä¾èµ–**: è§’è‰²ç³»ç»Ÿã€æ€ªç‰©ç³»ç»Ÿã€æ•°å€¼è®¡ç®—ç³»ç»Ÿã€é˜Ÿä¼ç³»ç»Ÿ
- **æ–‡ä»¶**: `server/internal/game/battle_manager.go`
- **ç‰¹ç‚¹**: æ”¯æŒå•è§’è‰²å’Œå¤šè§’è‰²å°é˜Ÿæˆ˜æ–—

#### 6. æŠ€èƒ½ç³»ç»Ÿ (Skill System) - ä¼˜å…ˆçº§2 â­
- **èŒè´£**: æŠ€èƒ½ç®¡ç†ã€å†·å´ç®¡ç†ã€æ•ˆæœåº”ç”¨
- **æ ¸å¿ƒç±»**: `SkillManager`, `BuffManager`, `PassiveSkillManager`
- **ä¾èµ–**: æˆ˜æ–—ç³»ç»Ÿã€æ•°å€¼è®¡ç®—ç³»ç»Ÿã€é…ç½®ç®¡ç†ç³»ç»Ÿ
- **æ–‡ä»¶**: `server/internal/game/skill_manager.go`

#### 7. è£…å¤‡ç³»ç»Ÿ (Equipment System) - ä¼˜å…ˆçº§3 â­â­â­ **æ ¸å¿ƒç³»ç»Ÿ**
- **èŒè´£**: è£…å¤‡ç®¡ç†ã€è¯ç¼€ç”Ÿæˆã€å±æ€§åŠ æˆè®¡ç®—ã€è£…å¤‡å¼ºåŒ–
- **æ ¸å¿ƒç±»**: `EquipmentManager`, `AffixGenerator`, `EquipmentEnhancer`
- **ä¾èµ–**: è§’è‰²ç³»ç»Ÿã€æ•°å€¼è®¡ç®—ç³»ç»Ÿã€ç»æµç³»ç»Ÿã€é…ç½®ç®¡ç†ç³»ç»Ÿ
- **æ–‡ä»¶**: `server/internal/game/equipment_manager.go`
- **è®¾è®¡ç†å¿µ**: å€Ÿé‰´æš—é»‘2
  - éšæœºè¯ç¼€ç³»ç»Ÿï¼ˆå‰ç¼€+åç¼€ï¼‰
  - è£…å¤‡å“è´¨åˆ†çº§ï¼ˆç™½/ç»¿/è“/ç´«/æ©™/ä¼ è¯´ï¼‰
  - è£…å¤‡å¼ºåŒ–ç³»ç»Ÿï¼ˆææ–™å¼ºåŒ–ï¼‰
  - è£…å¤‡äº¤æ˜“ç³»ç»Ÿ
  - ç¨€æœ‰è£…å¤‡æ‰è½æœºåˆ¶

#### 8. ç­–ç•¥ç³»ç»Ÿ (Strategy System) - ä¼˜å…ˆçº§4
- **èŒè´£**: ç­–ç•¥è§£æã€æ¡ä»¶åˆ¤æ–­ã€æŠ€èƒ½é€‰æ‹©ã€é˜Ÿä¼ç­–ç•¥
- **æ ¸å¿ƒç±»**: `StrategyExecutor`, `ConditionEvaluator`, `TeamStrategyExecutor`
- **ä¾èµ–**: æˆ˜æ–—ç³»ç»Ÿã€æŠ€èƒ½ç³»ç»Ÿã€é˜Ÿä¼ç³»ç»Ÿ
- **æ–‡ä»¶**: `server/internal/game/strategy_executor.go`

#### 9. é˜Ÿä¼ç³»ç»Ÿ (Team System) - ä¼˜å…ˆçº§5 â­
- **èŒè´£**: é˜Ÿä¼ç®¡ç†ã€è§’è‰²æ­é…ã€é˜Ÿä¼å±æ€§è®¡ç®—ã€é˜Ÿä¼æˆ˜æ–—
- **æ ¸å¿ƒç±»**: `TeamManager`, `TeamComposition`, `TeamAttributeCalculator`
- **ä¾èµ–**: è§’è‰²ç³»ç»Ÿã€æˆ˜æ–—ç³»ç»Ÿ
- **æ–‡ä»¶**: `server/internal/game/team_manager.go` (å¾…åˆ›å»º)
- **ç‰¹ç‚¹**: åˆå§‹1ä¸ªè§’è‰²ï¼Œæœ€å¤šæ‰©å±•åˆ°5äººå°é˜Ÿ

#### 10. æˆ˜æ–—ç»Ÿè®¡ç³»ç»Ÿ (Battle Statistics System) - ä¼˜å…ˆçº§6 â­
- **èŒè´£**: æˆ˜æ–—æ•°æ®æ”¶é›†ã€ç»Ÿè®¡åˆ†æã€æ•°æ®å±•ç¤ºã€ç­–ç•¥ä¼˜åŒ–å»ºè®®
- **æ ¸å¿ƒç±»**: `BattleStatsCollector`, `StatsAnalyzer`, `StrategyOptimizer`
- **ä¾èµ–**: æˆ˜æ–—ç³»ç»Ÿã€è§’è‰²ç³»ç»Ÿ
- **æ–‡ä»¶**: `server/internal/game/battle_stats.go` (å¾…åˆ›å»º)

#### 11. ç»æµç³»ç»Ÿ (Economy System) - ä¼˜å…ˆçº§7 â­
- **èŒè´£**: é‡‘å¸ç®¡ç†ã€è£…å¤‡æ¶ˆè€—ã€å¼ºåŒ–æ¶ˆè€—ã€å•†åº—ç³»ç»Ÿ
- **æ ¸å¿ƒç±»**: `EconomyManager`, `ShopManager`, `EnhancementCostCalculator`
- **ä¾èµ–**: è£…å¤‡ç³»ç»Ÿã€è§’è‰²ç³»ç»Ÿã€é…ç½®ç®¡ç†ç³»ç»Ÿ
- **æ–‡ä»¶**: `server/internal/game/economy_manager.go` (å¾…åˆ›å»º)

### æœªæ¥æ‰©å±•ç³»ç»Ÿï¼ˆè½»é‡çº§è”ç½‘åŠŸèƒ½ï¼‰

#### 12. äº¤æ˜“ç³»ç»Ÿ (Trading System)
- **èŒè´£**: ç©å®¶é—´äº¤æ˜“ã€æ‹å–è¡Œã€è£…å¤‡äº¤æ˜“
- **ä¾èµ–**: è£…å¤‡ç³»ç»Ÿã€è§’è‰²ç³»ç»Ÿã€ç»æµç³»ç»Ÿ

#### 13. æ’åç³»ç»Ÿ (Ranking System)
- **èŒè´£**: æ’è¡Œæ¦œç®¡ç†ã€æ’åè®¡ç®—ã€å¥–åŠ±å‘æ”¾
- **ä¾èµ–**: è§’è‰²ç³»ç»Ÿã€æˆ˜æ–—ç³»ç»Ÿã€æˆ˜æ–—ç»Ÿè®¡ç³»ç»Ÿ

#### 14. å…¬å‘Š/èŠå¤©ç³»ç»Ÿ (Chat/Announcement System)
- **èŒè´£**: èŠå¤©ç®¡ç†ã€å…¬å‘Šå‘å¸ƒã€æ¶ˆæ¯æ¨é€
- **ä¾èµ–**: ç”¨æˆ·ç³»ç»Ÿ

#### 15. æˆå°±ç³»ç»Ÿ (Achievement System)
- **èŒè´£**: æˆå°±ç®¡ç†ã€è¿›åº¦è¿½è¸ªã€å¥–åŠ±å‘æ”¾
- **ä¾èµ–**: æˆ˜æ–—ç³»ç»Ÿã€è§’è‰²ç³»ç»Ÿã€æˆ˜æ–—ç»Ÿè®¡ç³»ç»Ÿ

#### 16. åœ°å›¾/å‰¯æœ¬ç³»ç»Ÿ (Zone/Dungeon System)
- **èŒè´£**: åŒºåŸŸç®¡ç†ã€å‰¯æœ¬ç”Ÿæˆã€æ¢ç´¢åº¦
- **ä¾èµ–**: æˆ˜æ–—ç³»ç»Ÿã€è§’è‰²ç³»ç»Ÿã€æ€ªç‰©ç³»ç»Ÿ

---

## ç³»ç»Ÿä¾èµ–å…³ç³»

```mermaid
graph TD
    B[Calculator System] 
    C[Config System]
    
    A[Character System] --> B
    M[Monster System] --> C
    M --> B
    
    T[Team System] --> A
    
    BT[Battle System] --> A
    BT --> M
    BT --> B
    BT --> T
    
    D[Skill System] --> BT
    D --> B
    D --> C
    
    E[Equipment System] --> A
    E --> B
    E --> G[Economy System]
    E --> C
    
    F[Strategy System] --> BT
    F --> D
    F --> T
    
    S[Battle Stats System] --> BT
    S --> A
    
    G --> E
    G --> A
    G --> C
    
    H[Trading System] --> E
    H --> A
    H --> G
    
    I[Zone System] --> BT
    I --> A
    I --> M
    
    J[Ranking System] --> A
    J --> BT
    J --> S
    
    K[Chat System] --> A
    
    L[Achievement System] --> BT
    L --> A
    L --> S
    
    A --> R[Repository Layer]
    BT --> R
    D --> R
    E --> R
    F --> R
    T --> R
    S --> R
    G --> R
    M --> R
    C --> R
    R --> DB[Database]
```

---

## æ•°æ®æµè®¾è®¡

### æˆ˜æ–—æ•°æ®æµ

```
ç©å®¶è¯·æ±‚æˆ˜æ–—
    â†“
BattleManager åˆå§‹åŒ–æˆ˜æ–—
    â†“
MonsterManager ç”Ÿæˆæ€ªç‰©ï¼ˆä»é…ç½®è¡¨è¯»å–ï¼‰
    â†“
BattleManager æ‰§è¡Œå›åˆ
    â†“
Calculator è®¡ç®—ä¼¤å®³/æ²»ç–—
    â†“
SkillManager åº”ç”¨æŠ€èƒ½æ•ˆæœ
    â†“
BattleStatsCollector æ”¶é›†æˆ˜æ–—æ•°æ®
    â†“
æˆ˜æ–—ç»“æŸï¼Œæ›´æ–°è§’è‰²æ•°æ®
    â†“
EquipmentManager å¤„ç†è£…å¤‡æ‰è½ï¼ˆä»é…ç½®è¡¨è¯»å–æ‰è½è§„åˆ™ï¼‰
    â†“
EconomyManager å¤„ç†é‡‘å¸å’Œç»éªŒå¥–åŠ±
```

### é…ç½®æ•°æ®æµ

```
é…ç½®è¡¨æ›´æ–°ï¼ˆæ•°æ®åº“ï¼‰
    â†“
ConfigManager åŠ è½½é…ç½®
    â†“
ConfigManager ç¼“å­˜é…ç½®ï¼ˆå†…å­˜ï¼‰
    â†“
å„ç³»ç»Ÿé€šè¿‡ ConfigManager è·å–é…ç½®
    â†“
é…ç½®å˜æ›´æ—¶ï¼ŒConfigManager é€šçŸ¥ç›¸å…³ç³»ç»Ÿ
    â†“
ç³»ç»Ÿé‡æ–°åŠ è½½é…ç½®ï¼ˆçƒ­æ›´æ–°ï¼‰
```

---

## é…ç½®åŒ–è®¾è®¡

### è®¾è®¡åŸåˆ™

1. **é…ç½®ä¸ä»£ç åˆ†ç¦»**: æ‰€æœ‰æ¸¸æˆå¹³è¡¡æ•°æ®å­˜å‚¨åœ¨é…ç½®è¡¨ä¸­
2. **ç‰ˆæœ¬åŒ–ç®¡ç†**: é…ç½®å˜æ›´è®°å½•ç‰ˆæœ¬ï¼Œæ”¯æŒå›æ»š
3. **çƒ­æ›´æ–°æ”¯æŒ**: é…ç½®å˜æ›´æ— éœ€é‡å¯æœåŠ¡
4. **å‡å°‘æ•°æ®è¿ç§»**: é€šè¿‡é…ç½®è¡¨ç®¡ç†ï¼Œé¿å…é¢‘ç¹çš„æ•°æ®åº“ç»“æ„å˜æ›´

### é…ç½®è¡¨åˆ†ç±»

#### 1. æ€ªç‰©é…ç½®è¡¨ (monsters)
- æ€ªç‰©åŸºç¡€å±æ€§ï¼ˆHPã€æ”»å‡»ã€é˜²å¾¡ç­‰ï¼‰
- æ€ªç‰©æŠ€èƒ½é…ç½®
- æ€ªç‰©AIè¡Œä¸ºæ¨¡å¼
- æ€ªç‰©æ‰è½é…ç½®
- **å¹³è¡¡æ€§è°ƒæ•´**: ç›´æ¥ä¿®æ”¹é…ç½®è¡¨å³å¯è°ƒæ•´æ€ªç‰©å¼ºåº¦

#### 2. æŠ€èƒ½é…ç½®è¡¨ (skills)
- æŠ€èƒ½åŸºç¡€æ•°å€¼
- æŠ€èƒ½å†·å´æ—¶é—´
- æŠ€èƒ½æ¶ˆè€—
- æŠ€èƒ½æ•ˆæœ
- **å¹³è¡¡æ€§è°ƒæ•´**: ä¿®æ”¹æŠ€èƒ½æ•°å€¼å³å¯è°ƒæ•´æŠ€èƒ½å¼ºåº¦

#### 3. è£…å¤‡é…ç½®è¡¨ (items)
- è£…å¤‡åŸºç¡€å±æ€§
- è¯ç¼€æ± é…ç½®
- æ‰è½ç‡é…ç½®
- å¼ºåŒ–æ¶ˆè€—é…ç½®
- **å¹³è¡¡æ€§è°ƒæ•´**: ä¿®æ”¹æ‰è½ç‡å’Œè¯ç¼€æ•°å€¼å³å¯è°ƒæ•´è£…å¤‡å¼ºåº¦

#### 4. ç»æµé…ç½®è¡¨ (economy_config)
- é‡‘å¸è·å–å€ç‡
- ç»éªŒè·å–å€ç‡
- å•†åº—ä»·æ ¼
- å¼ºåŒ–æ¶ˆè€—
- **å¹³è¡¡æ€§è°ƒæ•´**: ä¿®æ”¹å€ç‡å’Œä»·æ ¼å³å¯è°ƒæ•´ç»æµå¹³è¡¡

#### 5. åŒºåŸŸé…ç½®è¡¨ (zones)
- åŒºåŸŸç­‰çº§èŒƒå›´
- ç»éªŒ/é‡‘å¸å€ç‡
- æ€ªç‰©åˆ·æ–°é…ç½®
- **å¹³è¡¡æ€§è°ƒæ•´**: ä¿®æ”¹å€ç‡å³å¯è°ƒæ•´åŒºåŸŸæ”¶ç›Š

### é…ç½®ç®¡ç†æ¥å£

```go
// ConfigManager é…ç½®ç®¡ç†å™¨æ¥å£
type ConfigManager interface {
    // åŠ è½½é…ç½®
    LoadConfig(configType string) error
    
    // è·å–é…ç½®
    GetMonsterConfig(monsterID string) (*MonsterConfig, error)
    GetSkillConfig(skillID string) (*SkillConfig, error)
    GetItemConfig(itemID string) (*ItemConfig, error)
    
    // çƒ­æ›´æ–°é…ç½®
    ReloadConfig(configType string) error
    
    // é…ç½®å˜æ›´é€šçŸ¥
    RegisterConfigChangeListener(listener ConfigChangeListener)
}
```

### é…ç½®ç‰ˆæœ¬ç®¡ç†

```sql
-- é…ç½®ç‰ˆæœ¬è¡¨
CREATE TABLE config_versions (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    config_type VARCHAR(32) NOT NULL,
    version INTEGER NOT NULL,
    config_data TEXT NOT NULL,  -- JSONæ ¼å¼çš„é…ç½®æ•°æ®
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    created_by VARCHAR(32),
    description TEXT
);
```

---

## æ¥å£å®šä¹‰

### 1. æ•°å€¼è®¡ç®—æ¥å£

```go
// AttributeCalculator å±æ€§è®¡ç®—æ¥å£
type AttributeCalculator interface {
    // è®¡ç®—ç‰©ç†æ”»å‡»åŠ›
    CalculatePhysicalAttack(char *Character) int
    
    // è®¡ç®—æ³•æœ¯æ”»å‡»åŠ›
    CalculateMagicAttack(char *Character) int
    
    // è®¡ç®—é˜²å¾¡åŠ›
    CalculateDefense(char *Character) (physical, magic int)
    
    // è®¡ç®—ç”Ÿå‘½å€¼
    CalculateHP(char *Character) int
    
    // è®¡ç®—æ³•åŠ›å€¼
    CalculateMP(char *Character) int
}

// DamageCalculator ä¼¤å®³è®¡ç®—æ¥å£
type DamageCalculator interface {
    // è®¡ç®—ä¼¤å®³
    CalculateDamage(attacker, defender *Character, skill *Skill) int
    
    // è®¡ç®—æ²»ç–—
    CalculateHealing(healer, target *Character, skill *Skill) int
    
    // è®¡ç®—æš´å‡»ä¼¤å®³
    CalculateCritDamage(baseDamage int, critDamage float64) int
    
    // è®¡ç®—é—ªé¿
    ShouldDodge(attacker, defender *Character) bool
}
```

### 2. æˆ˜æ–—ç³»ç»Ÿæ¥å£

```go
// BattleManager æˆ˜æ–—ç®¡ç†å™¨æ¥å£
type BattleManager interface {
    // å¼€å§‹æˆ˜æ–—
    StartBattle(userID int, zoneID string) error
    
    // æ‰§è¡Œå›åˆ
    ExecuteTurn(userID int) error
    
    // è·å–æˆ˜æ–—çŠ¶æ€
    GetBattleStatus(userID int) (*BattleStatus, error)
    
    // åœæ­¢æˆ˜æ–—
    StopBattle(userID int) error
}

// MonsterManager æ€ªç‰©ç®¡ç†å™¨æ¥å£
type MonsterManager interface {
    // ç”Ÿæˆæ€ªç‰©
    GenerateMonster(zoneID string, level int) (*Monster, error)
    
    // è·å–æ€ªç‰©é…ç½®
    GetMonsterConfig(monsterID string) (*MonsterConfig, error)
    
    // æ›´æ–°æ€ªç‰©é…ç½®ï¼ˆçƒ­æ›´æ–°ï¼‰
    UpdateMonsterConfig(monsterID string, config *MonsterConfig) error
}
```

### 3. è£…å¤‡ç³»ç»Ÿæ¥å£

```go
// EquipmentManager è£…å¤‡ç®¡ç†å™¨æ¥å£
type EquipmentManager interface {
    // ç©¿æˆ´è£…å¤‡
    EquipItem(characterID int, itemID string) error
    
    // å¸ä¸‹è£…å¤‡
    UnequipItem(characterID int, slot string) error
    
    // ç”Ÿæˆè£…å¤‡è¯ç¼€
    GenerateAffixes(itemID string, quality string) ([]Affix, error)
    
    // å¼ºåŒ–è£…å¤‡
    EnhanceEquipment(characterID int, itemID string, materials []Material) error
}
```

### 4. é…ç½®ç®¡ç†æ¥å£

```go
// ConfigManager é…ç½®ç®¡ç†å™¨æ¥å£
type ConfigManager interface {
    // åŠ è½½é…ç½®
    LoadConfig(configType string) error
    
    // è·å–æ€ªç‰©é…ç½®
    GetMonsterConfig(monsterID string) (*MonsterConfig, error)
    
    // è·å–æŠ€èƒ½é…ç½®
    GetSkillConfig(skillID string) (*SkillConfig, error)
    
    // è·å–è£…å¤‡é…ç½®
    GetItemConfig(itemID string) (*ItemConfig, error)
    
    // çƒ­æ›´æ–°é…ç½®
    ReloadConfig(configType string) error
}
```

---

## æœªæ¥æ‰©å±•æ¥å£

### 1. äº¤æ˜“ç³»ç»Ÿæ¥å£ï¼ˆé¢„ç•™ï¼‰

```go
// TradingManager äº¤æ˜“ç®¡ç†å™¨æ¥å£ï¼ˆé¢„ç•™ï¼‰
type TradingManager interface {
    // åˆ›å»ºäº¤æ˜“
    CreateTrade(sellerID, buyerID int, items []Item, price int) error
    
    // å®Œæˆäº¤æ˜“
    CompleteTrade(tradeID int) error
    
    // å–æ¶ˆäº¤æ˜“
    CancelTrade(tradeID int) error
}
```

### 2. æ’åç³»ç»Ÿæ¥å£ï¼ˆé¢„ç•™ï¼‰

```go
// RankingManager æ’åç®¡ç†å™¨æ¥å£ï¼ˆé¢„ç•™ï¼‰
type RankingManager interface {
    // æ›´æ–°æ’å
    UpdateRanking(userID int, category string, score int) error
    
    // è·å–æ’è¡Œæ¦œ
    GetLeaderboard(category string, limit int) ([]RankingEntry, error)
}
```

### 3. æˆå°±ç³»ç»Ÿæ¥å£ï¼ˆé¢„ç•™ï¼‰

```go
// AchievementManager æˆå°±ç®¡ç†å™¨æ¥å£ï¼ˆé¢„ç•™ï¼‰
type AchievementManager interface {
    // æ£€æŸ¥æˆå°±è¿›åº¦
    CheckProgress(userID int, achievementID string) error
    
    // å®Œæˆæˆå°±
    CompleteAchievement(userID int, achievementID string) error
}
```

---

## æ•°æ®åº“è®¾è®¡åŸåˆ™

### 1. é…ç½®è¡¨ä¸æ•°æ®è¡¨åˆ†ç¦»

- **é…ç½®è¡¨**: å­˜å‚¨æ¸¸æˆé…ç½®æ•°æ®ï¼ˆæ€ªç‰©ã€æŠ€èƒ½ã€è£…å¤‡ç­‰ï¼‰ï¼Œåªè¯»ï¼Œé€šè¿‡é…ç½®ç®¡ç†æ›´æ–°
- **æ•°æ®è¡¨**: å­˜å‚¨ç©å®¶æ•°æ®ï¼ˆè§’è‰²ã€è£…å¤‡å®ä¾‹ã€èƒŒåŒ…ç­‰ï¼‰ï¼Œå¯è¯»å†™

### 2. ç‰ˆæœ¬åŒ–ç®¡ç†

- é…ç½®å˜æ›´è®°å½•ç‰ˆæœ¬
- æ”¯æŒé…ç½®å›æ»š
- å‡å°‘æ•°æ®è¿ç§»å¤æ‚åº¦

### 3. æ‰©å±•æ€§è®¾è®¡

- ä½¿ç”¨JSONå­—æ®µå­˜å‚¨çµæ´»æ•°æ®
- é¢„ç•™æ‰©å±•å­—æ®µ
- é¿å…é¢‘ç¹çš„è¡¨ç»“æ„å˜æ›´

---

## æ€»ç»“

### æ¶æ„ç‰¹ç‚¹

1. **æ¸…æ™°çš„åˆ†å±‚**: è¡¨ç°å±‚ã€ä¸šåŠ¡é€»è¾‘å±‚ã€æ•°æ®è®¿é—®å±‚ã€æ•°æ®æŒä¹…å±‚
2. **æ¨¡å—åŒ–è®¾è®¡**: æ¯ä¸ªç³»ç»Ÿç‹¬ç«‹ï¼Œé€šè¿‡æ¥å£äº¤äº’
3. **é…ç½®åŒ–å¹³è¡¡**: æ‰€æœ‰å¹³è¡¡æ•°æ®é€šè¿‡é…ç½®è¡¨ç®¡ç†
4. **æ˜“äºæ‰©å±•**: é¢„ç•™æ‰©å±•æ¥å£ï¼Œæ”¯æŒæœªæ¥åŠŸèƒ½
5. **æ–¹ä¾¿è°ƒæ•´**: é…ç½®çƒ­æ›´æ–°ï¼Œæ— éœ€é‡å¯æœåŠ¡

### æ ¸å¿ƒä¼˜åŠ¿

- **å‡å°‘æ•°æ®è¿ç§»**: é€šè¿‡é…ç½®è¡¨ç®¡ç†ï¼Œé¿å…é¢‘ç¹çš„æ•°æ®åº“ç»“æ„å˜æ›´
- **å¿«é€Ÿå¹³è¡¡è°ƒæ•´**: ä¿®æ”¹é…ç½®è¡¨å³å¯è°ƒæ•´æ¸¸æˆå¹³è¡¡
- **ä¸°å¯Œçš„æ€ªç‰©ç³»ç»Ÿ**: ä¸åŒæ€ªç‰©å¸¦æ¥ä¸åŒæŒ‘æˆ˜ï¼Œé¿å…ä¸€æ‹›èµ°éå¤©ä¸‹
- **é…ç½®åŒ–è®¾è®¡**: æ‰€æœ‰æ¸¸æˆå¹³è¡¡æ•°æ®å¯é…ç½®ï¼Œæ–¹ä¾¿è°ƒæ•´

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**æœ€åæ›´æ–°**: 2025å¹´


