# æµ‹è¯•ç”¨ä¾‹è¡¥å……å»ºè®®

## ğŸ“Š å½“å‰æµ‹è¯•è¦†ç›–æƒ…å†µ

### âœ… å·²è¦†ç›–çš„åŠŸèƒ½ï¼ˆPhase 0-3ï¼‰

1. **æ•°å€¼è®¡ç®—ç³»ç»Ÿ** âœ…
   - å±æ€§è½¬æ¢ï¼š5ä¸ªæµ‹è¯•ç”¨ä¾‹
   - æš´å‡»å’Œé—ªé¿ï¼š8ä¸ªæµ‹è¯•ç”¨ä¾‹
   - ä¼¤å®³è®¡ç®—ï¼š6ä¸ªæµ‹è¯•ç”¨ä¾‹
   - è¾¹ç•Œæƒ…å†µï¼š8ä¸ªæµ‹è¯•ç”¨ä¾‹
   - èµ„æºè®¡ç®—ï¼š10ä¸ªæµ‹è¯•ç”¨ä¾‹
   - **æ€»è®¡ï¼š37ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼Œå…¨éƒ¨é€šè¿‡**

2. **æˆ˜æ–—ç³»ç»Ÿæ ¸å¿ƒ** âœ…
   - åŸºç¡€æˆ˜æ–—ï¼šå·²è¦†ç›–
   - ä¼¤å®³è®¡ç®—ï¼šå·²è¦†ç›–
   - æŠ€èƒ½æˆ˜æ–—ï¼šå·²è¦†ç›–
   - æ²»ç–—æŠ€èƒ½ï¼šå·²è¦†ç›–
   - Buff/Debuffï¼šå·²è¦†ç›–
   - å¤šæ•Œäººæˆ˜æ–—ï¼šå·²è¦†ç›–
   - å›åˆé¡ºåºï¼šå·²è¦†ç›–

3. **æŠ€èƒ½ç³»ç»Ÿ** âœ…
   - æŠ€èƒ½ä½¿ç”¨ï¼šå·²è¦†ç›–
   - Buff/Debuffï¼šå·²è¦†ç›–
   - å åŠ è§„åˆ™ï¼šå·²è¦†ç›–
   - DOT/HOTï¼šå·²è¦†ç›–
   - è¢«åŠ¨æŠ€èƒ½ï¼šGoå•å…ƒæµ‹è¯•è¦†ç›–
   - æŠ€èƒ½å‡çº§ï¼šGoå•å…ƒæµ‹è¯•è¦†ç›–

4. **æ€ªç‰©ç³»ç»Ÿ** âœ…
   - æ€ªç‰©ç”Ÿæˆï¼šå·²è¦†ç›–
   - æ€ªç‰©AIï¼šå·²è¦†ç›–
   - æ€ªç‰©æ‰è½ï¼šå·²è¦†ç›–

---

## ğŸ” éœ€è¦è¡¥å……çš„æµ‹è¯•ç”¨ä¾‹

### 1. **ä¼‘æ¯ç³»ç»Ÿï¼ˆRest Systemï¼‰** â­â­â­â­â­ (é«˜ä¼˜å…ˆçº§)

**å½“å‰çŠ¶æ€ï¼š**
- âœ… Goå•å…ƒæµ‹è¯•å·²è¦†ç›–ï¼ˆ`battle_manager_test.go`ï¼‰
- âŒ **ç¼ºå°‘YAMLè‡ªç„¶è¯­è¨€æµ‹è¯•ç”¨ä¾‹**

**éœ€è¦è¡¥å……çš„æµ‹è¯•ç”¨ä¾‹ï¼š**

```yaml
# æ–‡ä»¶ï¼šserver/internal/test/cases/battle/rest_system.yaml
test_suite: "æˆ˜æ–—ç³»ç»Ÿ - ä¼‘æ¯ç³»ç»Ÿ"
description: "æµ‹è¯•æˆ˜æ–—åçš„ä¼‘æ¯æœºåˆ¶ï¼ŒåŒ…æ‹¬ä¼‘æ¯è§¦å‘ã€æ¢å¤é€Ÿåº¦ã€ä¼‘æ¯ç»“æŸç­‰"

tests:
  - name: "ä¼‘æ¯è§¦å‘æµ‹è¯•"
    description: "æµ‹è¯•å‡»è´¥æ‰€æœ‰æ•Œäººåè‡ªåŠ¨è¿›å…¥ä¼‘æ¯çŠ¶æ€"
    category: "integration"
    priority: "high"
    setup:
      - "åˆ›å»ºä¸€ä¸ªè§’è‰²ï¼ŒHP=50/100ï¼ŒResource=25/50"
      - "åˆ›å»ºä¸€ä¸ªæ€ªç‰©ï¼ŒHP=100"
      - "åˆå§‹åŒ–æˆ˜æ–—ç³»ç»Ÿ"
    steps:
      - action: "å¼€å§‹æˆ˜æ–—"
        expected: "æˆ˜æ–—å¼€å§‹"
      - action: "ç»§ç»­æˆ˜æ–—ç›´åˆ°æ€ªç‰©æ­»äº¡"
        expected: "æˆ˜æ–—ç»“æŸåè‡ªåŠ¨è¿›å…¥ä¼‘æ¯çŠ¶æ€"
        max_rounds: 30
    assertions:
      - type: "equals"
        target: "battle_state"
        expected: "resting"
        message: "åº”è¯¥è¿›å…¥ä¼‘æ¯çŠ¶æ€"
      - type: "not_null"
        target: "rest_until"
        message: "åº”è¯¥æœ‰ä¼‘æ¯ç»“æŸæ—¶é—´"

  - name: "ä¼‘æ¯æ¢å¤æµ‹è¯•"
    description: "æµ‹è¯•ä¼‘æ¯æœŸé—´HPå’ŒResourceçš„æ¢å¤"
    category: "integration"
    priority: "high"
    setup:
      - "åˆ›å»ºä¸€ä¸ªè§’è‰²ï¼ŒHP=50/100ï¼ŒResource=25/50"
      - "è¿›å…¥ä¼‘æ¯çŠ¶æ€"
    steps:
      - action: "ç­‰å¾…ä¼‘æ¯æ¢å¤ï¼ˆæ¨¡æ‹Ÿæ—¶é—´æ¨è¿›ï¼‰"
        expected: "HPå’ŒResourceåº”è¯¥é€æ¸æ¢å¤"
    assertions:
      - type: "greater_than"
        target: "character.hp"
        expected: "50"
        message: "HPåº”è¯¥å¢åŠ "
      - type: "greater_than"
        target: "character.resource"
        expected: "25"
        message: "Resourceåº”è¯¥å¢åŠ "

  - name: "ä¼‘æ¯ç»“æŸæµ‹è¯•"
    description: "æµ‹è¯•ä¼‘æ¯ç»“æŸåè‡ªåŠ¨å¼€å§‹æ–°æˆ˜æ–—"
    category: "integration"
    priority: "high"
    setup:
      - "åˆ›å»ºä¸€ä¸ªè§’è‰²"
      - "è¿›å…¥ä¼‘æ¯çŠ¶æ€ï¼Œä¼‘æ¯æ—¶é—´=0ï¼ˆç«‹å³ç»“æŸï¼‰"
    steps:
      - action: "æ£€æŸ¥ä¼‘æ¯çŠ¶æ€"
        expected: "ä¼‘æ¯åº”è¯¥ç»“æŸï¼Œå¯ä»¥å¼€å§‹æ–°æˆ˜æ–—"
    assertions:
      - type: "equals"
        target: "battle_state"
        expected: "ready"
        message: "ä¼‘æ¯ç»“æŸååº”è¯¥å¯ä»¥å¼€å§‹æ–°æˆ˜æ–—"

  - name: "ä¼‘æ¯é€Ÿåº¦å€ç‡æµ‹è¯•"
    description: "æµ‹è¯•ä¼‘æ¯é€Ÿåº¦å€ç‡å¯¹æ¢å¤é€Ÿåº¦çš„å½±å“"
    category: "unit"
    priority: "medium"
    setup:
      - "åˆ›å»ºä¸€ä¸ªè§’è‰²ï¼ŒHP=50/100"
      - "è®¾ç½®ä¼‘æ¯é€Ÿåº¦å€ç‡=2.0"
    steps:
      - action: "ç­‰å¾…ä¼‘æ¯æ¢å¤"
        expected: "æ¢å¤é€Ÿåº¦åº”è¯¥æ˜¯æ­£å¸¸çš„2å€"
    assertions:
      - type: "greater_than"
        target: "hp_recovery_rate"
        expected: "base_recovery_rate"
        message: "æ¢å¤é€Ÿåº¦åº”è¯¥æ›´å¿«"
```

---

### 2. **æˆ˜æ–—ä¼šè¯ç®¡ç†ï¼ˆBattle Sessionï¼‰** â­â­â­â­ (é«˜ä¼˜å…ˆçº§)

**å½“å‰çŠ¶æ€ï¼š**
- âœ… Goå•å…ƒæµ‹è¯•å·²è¦†ç›–
- âš ï¸ YAMLæµ‹è¯•ç”¨ä¾‹ä¸è¶³

**éœ€è¦è¡¥å……çš„æµ‹è¯•ç”¨ä¾‹ï¼š**

```yaml
# æ–‡ä»¶ï¼šserver/internal/test/cases/battle/battle_session.yaml
test_suite: "æˆ˜æ–—ç³»ç»Ÿ - æˆ˜æ–—ä¼šè¯ç®¡ç†"
description: "æµ‹è¯•æˆ˜æ–—ä¼šè¯çš„åˆ›å»ºã€ç®¡ç†ã€çŠ¶æ€è½¬æ¢ç­‰"

tests:
  - name: "ä¼šè¯åˆ›å»ºæµ‹è¯•"
    description: "æµ‹è¯•æˆ˜æ–—ä¼šè¯çš„è‡ªåŠ¨åˆ›å»º"
    category: "unit"
    priority: "high"
    setup:
      - "åˆå§‹åŒ–æˆ˜æ–—ç®¡ç†å™¨"
    steps:
      - action: "è·å–æˆ–åˆ›å»ºä¼šè¯ï¼ˆç”¨æˆ·ID=1ï¼‰"
        expected: "åº”è¯¥åˆ›å»ºæ–°çš„æˆ˜æ–—ä¼šè¯"
    assertions:
      - type: "not_null"
        target: "battle_session"
        message: "åº”è¯¥åˆ›å»ºæˆ˜æ–—ä¼šè¯"
      - type: "equals"
        target: "session.user_id"
        expected: "1"
        message: "ä¼šè¯åº”è¯¥å…³è”åˆ°æ­£ç¡®çš„ç”¨æˆ·"

  - name: "ä¼šè¯çŠ¶æ€è½¬æ¢æµ‹è¯•"
    description: "æµ‹è¯•æˆ˜æ–—ä¼šè¯çš„çŠ¶æ€è½¬æ¢ï¼ˆå¼€å§‹/æš‚åœ/åœæ­¢ï¼‰"
    category: "integration"
    priority: "high"
    setup:
      - "åˆ›å»ºæˆ˜æ–—ä¼šè¯"
    steps:
      - action: "å¼€å§‹æˆ˜æ–—"
        expected: "ä¼šè¯çŠ¶æ€åº”è¯¥å˜ä¸ºè¿è¡Œä¸­"
      - action: "æš‚åœæˆ˜æ–—"
        expected: "ä¼šè¯çŠ¶æ€åº”è¯¥å˜ä¸ºæš‚åœ"
      - action: "ç»§ç»­æˆ˜æ–—"
        expected: "ä¼šè¯çŠ¶æ€åº”è¯¥æ¢å¤ä¸ºè¿è¡Œä¸­"
    assertions:
      - type: "equals"
        target: "session.is_running"
        expected: "true"
        message: "æˆ˜æ–—åº”è¯¥å¤„äºè¿è¡ŒçŠ¶æ€"

  - name: "ä¼šè¯æ•°æ®æŒä¹…åŒ–æµ‹è¯•"
    description: "æµ‹è¯•æˆ˜æ–—ä¼šè¯æ•°æ®çš„ä¿å­˜å’Œæ¢å¤"
    category: "integration"
    priority: "medium"
    setup:
      - "åˆ›å»ºæˆ˜æ–—ä¼šè¯ï¼Œè¿›è¡Œå¤šåœºæˆ˜æ–—"
    steps:
      - action: "æ‰§è¡Œ5åœºæˆ˜æ–—"
        expected: "ä¼šè¯åº”è¯¥è®°å½•æˆ˜æ–—æ¬¡æ•°ã€å‡»æ€æ•°ã€ç»éªŒå€¼ç­‰"
    assertions:
      - type: "equals"
        target: "session.battle_count"
        expected: "5"
        message: "åº”è¯¥è®°å½•æ­£ç¡®çš„æˆ˜æ–—æ¬¡æ•°"
      - type: "greater_than"
        target: "session.session_kills"
        expected: "0"
        message: "åº”è¯¥è®°å½•å‡»æ€æ•°"
```

---

### 3. **å¨èƒå€¼ç³»ç»Ÿè¾¹ç•Œæƒ…å†µ** â­â­â­ (ä¸­ä¼˜å…ˆçº§)

**å½“å‰çŠ¶æ€ï¼š**
- âœ… åŸºç¡€æµ‹è¯•å·²è¦†ç›–
- âš ï¸ è¾¹ç•Œæƒ…å†µæµ‹è¯•ä¸è¶³

**éœ€è¦è¡¥å……çš„æµ‹è¯•ç”¨ä¾‹ï¼š**

```yaml
# è¡¥å……åˆ°ï¼šserver/internal/test/cases/monster/monster_ai.yaml

  - name: "å¨èƒå€¼æ¸…é›¶æµ‹è¯•"
    description: "æµ‹è¯•è§’è‰²æ­»äº¡åå¨èƒå€¼æ¸…é›¶"
    category: "integration"
    priority: "medium"
    setup:
      - "åˆ›å»ºæˆ˜æ–—ä¼šè¯"
      - "åˆ›å»ºè§’è‰²å’Œæ€ªç‰©"
      - "è§’è‰²å¯¹æ€ªç‰©é€ æˆ100ç‚¹ä¼¤å®³ï¼ˆå¨èƒå€¼=100ï¼‰"
    steps:
      - action: "è§’è‰²æ­»äº¡ï¼ˆHP=0ï¼‰"
        expected: "è¯¥è§’è‰²çš„å¨èƒå€¼åº”è¯¥è¢«æ¸…é›¶"
    assertions:
      - type: "equals"
        target: "threat_value_after_death"
        expected: "0"
        message: "æ­»äº¡è§’è‰²çš„å¨èƒå€¼åº”è¯¥ä¸º0"

  - name: "å¤šæ€ªç‰©å¨èƒå€¼ç‹¬ç«‹æµ‹è¯•"
    description: "æµ‹è¯•ä¸åŒæ€ªç‰©çš„å¨èƒå€¼è¡¨æ˜¯ç‹¬ç«‹çš„"
    category: "integration"
    priority: "medium"
    setup:
      - "åˆ›å»ºæˆ˜æ–—ä¼šè¯"
      - "åˆ›å»º2ä¸ªæ€ªç‰©å’Œ1ä¸ªè§’è‰²"
    steps:
      - action: "è§’è‰²å¯¹æ€ªç‰©1é€ æˆ100ç‚¹ä¼¤å®³"
        expected: "æ€ªç‰©1çš„å¨èƒå€¼=100"
      - action: "è§’è‰²å¯¹æ€ªç‰©2é€ æˆ50ç‚¹ä¼¤å®³"
        expected: "æ€ªç‰©2çš„å¨èƒå€¼=50ï¼Œæ€ªç‰©1çš„å¨èƒå€¼ä¸å˜"
    assertions:
      - type: "equals"
        target: "monster1.threat_value"
        expected: "100"
        message: "æ€ªç‰©1çš„å¨èƒå€¼åº”è¯¥ä¿æŒ100"
      - type: "equals"
        target: "monster2.threat_value"
        expected: "50"
        message: "æ€ªç‰©2çš„å¨èƒå€¼åº”è¯¥ä¸º50"

  - name: "å¨èƒå€¼è¡°å‡æµ‹è¯•"
    description: "æµ‹è¯•å¨èƒå€¼éšæ—¶é—´è¡°å‡ï¼ˆå¦‚æœå®ç°ï¼‰"
    category: "integration"
    priority: "low"
    setup:
      - "åˆ›å»ºæˆ˜æ–—ä¼šè¯"
      - "åˆ›å»ºè§’è‰²å’Œæ€ªç‰©"
      - "è§’è‰²å¯¹æ€ªç‰©é€ æˆ100ç‚¹ä¼¤å®³"
    steps:
      - action: "ç­‰å¾…å¤šä¸ªå›åˆï¼ˆå¦‚æœå®ç°è¡°å‡ï¼‰"
        expected: "å¨èƒå€¼åº”è¯¥é€æ¸è¡°å‡"
    assertions:
      - type: "less_than"
        target: "threat_value_after_wait"
        expected: "100"
        message: "å¨èƒå€¼åº”è¯¥è¡°å‡ï¼ˆå¦‚æœå®ç°ï¼‰"
```

---

### 4. **å›åˆé¡ºåºç³»ç»Ÿè¾¹ç•Œæƒ…å†µ** â­â­â­ (ä¸­ä¼˜å…ˆçº§)

**å½“å‰çŠ¶æ€ï¼š**
- âœ… åŸºç¡€æµ‹è¯•å·²è¦†ç›–
- âš ï¸ è¾¹ç•Œæƒ…å†µæµ‹è¯•ä¸è¶³

**éœ€è¦è¡¥å……çš„æµ‹è¯•ç”¨ä¾‹ï¼š**

```yaml
# è¡¥å……åˆ°ï¼šserver/internal/test/cases/battle/turn_order.yaml

  - name: "å›åˆé¡ºåºåŠ¨æ€æ›´æ–°æµ‹è¯•"
    description: "æµ‹è¯•æˆ˜æ–—ä¸­é€Ÿåº¦å˜åŒ–æ—¶å›åˆé¡ºåºçš„æ›´æ–°"
    category: "integration"
    priority: "medium"
    setup:
      - "åˆ›å»º2ä¸ªè§’è‰²ï¼šè§’è‰²1ï¼ˆæ•æ·=50ï¼‰ï¼Œè§’è‰²2ï¼ˆæ•æ·=100ï¼‰"
      - "æ„å»ºå›åˆé¡ºåº"
    steps:
      - action: "ç»™è§’è‰²1æ·»åŠ åŠ é€ŸBuffï¼ˆæ•æ·+100ï¼‰"
        expected: "å›åˆé¡ºåºåº”è¯¥é‡æ–°æ’åºï¼Œè§’è‰²1åº”è¯¥æ’åœ¨å‰é¢"
    assertions:
      - type: "equals"
        target: "turn_order[0].character.id"
        expected: "character_1"
        message: "åŠ é€Ÿåçš„è§’è‰²1åº”è¯¥å…ˆè¡ŒåŠ¨"

  - name: "å›åˆé¡ºåºç©ºé˜Ÿåˆ—æµ‹è¯•"
    description: "æµ‹è¯•æ‰€æœ‰å‚ä¸è€…æ­»äº¡åå›åˆé¡ºåºä¸ºç©º"
    category: "integration"
    priority: "medium"
    setup:
      - "åˆ›å»º1ä¸ªè§’è‰²å’Œ1ä¸ªæ€ªç‰©"
      - "æ„å»ºå›åˆé¡ºåº"
    steps:
      - action: "è§’è‰²æ­»äº¡ï¼ˆHP=0ï¼‰"
      - action: "æ€ªç‰©æ­»äº¡ï¼ˆHP=0ï¼‰"
      - action: "é‡æ–°æ„å»ºå›åˆé¡ºåº"
        expected: "å›åˆé¡ºåºåº”è¯¥ä¸ºç©º"
    assertions:
      - type: "equals"
        target: "turn_order_length"
        expected: "0"
        message: "æ‰€æœ‰å‚ä¸è€…æ­»äº¡åå›åˆé¡ºåºåº”è¯¥ä¸ºç©º"

  - name: "å›åˆé¡ºåºå¹¶å‘æµ‹è¯•"
    description: "æµ‹è¯•å¤šä¸ªè§’è‰²åŒæ—¶è¡ŒåŠ¨æ—¶çš„å›åˆé¡ºåºå¤„ç†"
    category: "integration"
    priority: "low"
    setup:
      - "åˆ›å»º3ä¸ªè§’è‰²ï¼Œé€Ÿåº¦å®Œå…¨ç›¸åŒ"
    steps:
      - action: "æ„å»ºå›åˆé¡ºåº"
        expected: "é€Ÿåº¦ç›¸åŒæ—¶åº”è¯¥éšæœºæ’åº"
    assertions:
      - type: "equals"
        target: "turn_order_length"
        expected: "3"
        message: "åº”è¯¥æœ‰3ä¸ªå‚ä¸è€…"
```

---

### 5. **æˆ˜æ–—çŠ¶æ€è½¬æ¢** â­â­â­ (ä¸­ä¼˜å…ˆçº§)

**å½“å‰çŠ¶æ€ï¼š**
- âš ï¸ æµ‹è¯•è¦†ç›–ä¸è¶³

**éœ€è¦è¡¥å……çš„æµ‹è¯•ç”¨ä¾‹ï¼š**

```yaml
# æ–‡ä»¶ï¼šserver/internal/test/cases/battle/battle_state_transitions.yaml
test_suite: "æˆ˜æ–—ç³»ç»Ÿ - çŠ¶æ€è½¬æ¢"
description: "æµ‹è¯•æˆ˜æ–—çŠ¶æ€çš„è½¬æ¢ï¼ŒåŒ…æ‹¬å¼€å§‹ã€è¿›è¡Œä¸­ã€ä¼‘æ¯ã€ç»“æŸç­‰"

tests:
  - name: "æˆ˜æ–—å¼€å§‹çŠ¶æ€æµ‹è¯•"
    description: "æµ‹è¯•æˆ˜æ–—å¼€å§‹æ—¶çš„çŠ¶æ€åˆå§‹åŒ–"
    category: "integration"
    priority: "high"
    setup:
      - "åˆ›å»ºæˆ˜æ–—ä¼šè¯"
    steps:
      - action: "å¼€å§‹æˆ˜æ–—"
        expected: "æˆ˜æ–—çŠ¶æ€åº”è¯¥åˆå§‹åŒ–ä¸ºæ­£ç¡®å€¼"
    assertions:
      - type: "equals"
        target: "battle_state"
        expected: "running"
        message: "æˆ˜æ–—åº”è¯¥å¤„äºè¿è¡ŒçŠ¶æ€"
      - type: "equals"
        target: "current_turn_index"
        expected: "-1"
        message: "åº”è¯¥ä»ç©å®¶å›åˆå¼€å§‹"

  - name: "æˆ˜æ–—æš‚åœå’Œæ¢å¤æµ‹è¯•"
    description: "æµ‹è¯•æˆ˜æ–—æš‚åœå’Œæ¢å¤çš„çŠ¶æ€è½¬æ¢"
    category: "integration"
    priority: "medium"
    setup:
      - "åˆ›å»ºæˆ˜æ–—ä¼šè¯ï¼Œæˆ˜æ–—è¿›è¡Œä¸­"
    steps:
      - action: "æš‚åœæˆ˜æ–—"
        expected: "æˆ˜æ–—çŠ¶æ€åº”è¯¥å˜ä¸ºæš‚åœ"
      - action: "æ¢å¤æˆ˜æ–—"
        expected: "æˆ˜æ–—çŠ¶æ€åº”è¯¥æ¢å¤ä¸ºè¿è¡Œä¸­"
    assertions:
      - type: "equals"
        target: "battle_state_after_pause"
        expected: "paused"
        message: "æš‚åœåçŠ¶æ€åº”è¯¥ä¸ºpaused"
      - type: "equals"
        target: "battle_state_after_resume"
        expected: "running"
        message: "æ¢å¤åçŠ¶æ€åº”è¯¥ä¸ºrunning"

  - name: "æˆ˜æ–—ç»“æŸçŠ¶æ€æµ‹è¯•"
    description: "æµ‹è¯•æˆ˜æ–—ç»“æŸæ—¶çš„çŠ¶æ€è½¬æ¢"
    category: "integration"
    priority: "high"
    setup:
      - "åˆ›å»ºæˆ˜æ–—ä¼šè¯ï¼Œæˆ˜æ–—è¿›è¡Œä¸­"
    steps:
      - action: "ç»§ç»­æˆ˜æ–—ç›´åˆ°æ‰€æœ‰æ•Œäººæ­»äº¡"
        expected: "æˆ˜æ–—åº”è¯¥ç»“æŸï¼Œè¿›å…¥ä¼‘æ¯çŠ¶æ€"
        max_rounds: 50
    assertions:
      - type: "equals"
        target: "battle_state_after_victory"
        expected: "resting"
        message: "èƒœåˆ©ååº”è¯¥è¿›å…¥ä¼‘æ¯çŠ¶æ€"
```

---

## ğŸ“‹ ä¼˜å…ˆçº§æ€»ç»“

### é«˜ä¼˜å…ˆçº§ï¼ˆå»ºè®®ç«‹å³è¡¥å……ï¼‰
1. â­â­â­â­â­ **ä¼‘æ¯ç³»ç»ŸYAMLæµ‹è¯•ç”¨ä¾‹** - æ ¸å¿ƒåŠŸèƒ½ï¼Œç›®å‰åªæœ‰Goæµ‹è¯•
2. â­â­â­â­ **æˆ˜æ–—ä¼šè¯ç®¡ç†YAMLæµ‹è¯•ç”¨ä¾‹** - é‡è¦åŠŸèƒ½ï¼Œæµ‹è¯•è¦†ç›–ä¸è¶³

### ä¸­ä¼˜å…ˆçº§ï¼ˆå»ºè®®åç»­è¡¥å……ï¼‰
3. â­â­â­ **å¨èƒå€¼ç³»ç»Ÿè¾¹ç•Œæƒ…å†µ** - å®Œå–„ç°æœ‰æµ‹è¯•
4. â­â­â­ **å›åˆé¡ºåºç³»ç»Ÿè¾¹ç•Œæƒ…å†µ** - å®Œå–„ç°æœ‰æµ‹è¯•
5. â­â­â­ **æˆ˜æ–—çŠ¶æ€è½¬æ¢æµ‹è¯•** - é‡è¦ä½†å½“å‰è¦†ç›–ä¸è¶³

### ä½ä¼˜å…ˆçº§ï¼ˆå¯é€‰ï¼‰
6. â­â­ **å¨èƒå€¼è¡°å‡æµ‹è¯•** - å¦‚æœå®ç°è¯¥åŠŸèƒ½
7. â­â­ **å›åˆé¡ºåºå¹¶å‘æµ‹è¯•** - è¾¹ç•Œæƒ…å†µ

---

## ğŸ¯ å»ºè®®çš„ä¸‹ä¸€æ­¥è¡ŒåŠ¨

1. **ç«‹å³æ‰§è¡Œï¼š**
   - åˆ›å»º `rest_system.yaml` æµ‹è¯•ç”¨ä¾‹æ–‡ä»¶
   - åˆ›å»º `battle_session.yaml` æµ‹è¯•ç”¨ä¾‹æ–‡ä»¶
   - è¿è¡Œæ–°æµ‹è¯•ç”¨ä¾‹ï¼Œç¡®ä¿é€šè¿‡

2. **çŸ­æœŸè¡¥å……ï¼ˆ1å‘¨å†…ï¼‰ï¼š**
   - è¡¥å……å¨èƒå€¼ç³»ç»Ÿè¾¹ç•Œæƒ…å†µæµ‹è¯•
   - è¡¥å……å›åˆé¡ºåºç³»ç»Ÿè¾¹ç•Œæƒ…å†µæµ‹è¯•
   - åˆ›å»ºæˆ˜æ–—çŠ¶æ€è½¬æ¢æµ‹è¯•ç”¨ä¾‹

3. **ä¸­æœŸå®Œå–„ï¼ˆå¯é€‰ï¼‰ï¼š**
   - è¡¥å……ä½ä¼˜å…ˆçº§æµ‹è¯•ç”¨ä¾‹
   - æ€§èƒ½æµ‹è¯•
   - å‹åŠ›æµ‹è¯•

---

## ğŸ“ æµ‹è¯•è¦†ç›–ç‡è¯„ä¼°

**å½“å‰è¦†ç›–ç‡ï¼š** çº¦ 75-80%

**æ ¸å¿ƒåŠŸèƒ½è¦†ç›–ï¼š** âœ…
- åŸºç¡€æˆ˜æ–— âœ…
- ä¼¤å®³è®¡ç®— âœ…
- æŠ€èƒ½ç³»ç»Ÿ âœ…
- æ²»ç–—ç³»ç»Ÿ âœ…
- Buff/Debuff âœ…
- æ€ªç‰©ç³»ç»Ÿ âœ…

**é«˜çº§åŠŸèƒ½è¦†ç›–ï¼š** âš ï¸
- ä¼‘æ¯ç³»ç»Ÿ âš ï¸ (Goæµ‹è¯•âœ…ï¼ŒYAMLæµ‹è¯•âŒ)
- æˆ˜æ–—ä¼šè¯ç®¡ç† âš ï¸ (Goæµ‹è¯•âœ…ï¼ŒYAMLæµ‹è¯•ä¸è¶³)
- å¨èƒå€¼ç³»ç»Ÿ âœ… (åŸºç¡€âœ…ï¼Œè¾¹ç•Œæƒ…å†µâš ï¸)
- å›åˆé¡ºåºç³»ç»Ÿ âœ… (åŸºç¡€âœ…ï¼Œè¾¹ç•Œæƒ…å†µâš ï¸)

**è¡¥å……åé¢„æœŸè¦†ç›–ç‡ï¼š** çº¦ 85-90%

---

*æœ€åæ›´æ–°ï¼š2024å¹´*


