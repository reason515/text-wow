# 技能系统 - 技能学习测试
test_suite: "技能系统 - 技能学习"
description: "测试技能学习功能，包括技能解锁、学习条件、技能升级等"

tests:
  - name: "基础技能学习测试"
    description: "测试角色学习新技能的基本流程"
    category: "integration"
    priority: "high"
    setup:
      - "创建一个1级战士角色"
      - "创建一个技能，ID=warrior_charge，名称=冲锋"
    steps:
      - action: "角色学习技能"
        expected: "技能学习成功，角色获得该技能"
        assertions:
          - "角色技能列表应该包含该技能"
          - "技能等级应该为1"
    assertions:
      - type: "equals"
        target: "skill_learned"
        expected: "true"
        message: "技能应该学习成功"

  - name: "等级要求测试"
    description: "测试技能学习的等级要求"
    category: "unit"
    priority: "high"
    setup:
      - "创建一个5级战士角色"
      - "创建一个技能，ID=warrior_charge，名称=冲锋"
    steps:
      - action: "角色尝试学习技能"
        expected: "技能学习成功（当前系统暂不支持等级限制）"
    assertions:
      - type: "equals"
        target: "skill_learned"
        expected: "true"
        message: "技能应该学习成功（当前系统暂不支持等级限制）"

  - name: "职业要求测试"
    description: "测试技能学习的职业要求"
    category: "unit"
    priority: "high"
    setup:
      - "创建一个法师角色"
      - "准备一个只有战士才能学习的技能"
    steps:
      - action: "法师尝试学习战士技能"
        expected: "技能学习失败，提示职业不匹配"
    assertions:
      - type: "equals"
        target: "skill_learned"
        expected: "false"
        message: "技能应该学习失败"
      - type: "contains"
        target: "error_message"
        expected: "职业不匹配"
        message: "错误消息应该提示职业不匹配"

  - name: "技能升级测试"
    description: "测试已学习技能的升级"
    category: "integration"
    priority: "high"
    setup:
      - "创建一个战士角色，已学习冲锋技能（等级1）"
      - "角色拥有足够的技能点"
    steps:
      - action: "角色升级冲锋技能到等级2"
        expected: "技能升级成功，技能等级提升"
        assertions:
          - "技能等级应该从1提升到2"
          - "技能效果应该增强"
    assertions:
      - type: "equals"
        target: "character.skill_charge.level"
        expected: "2"
        message: "冲锋技能等级应该为2"
      - type: "greater_than"
        target: "character.skill_charge.damage_multiplier"
        expected: "skill_level_1_damage_multiplier"
        message: "技能伤害倍率应该提升"

  - name: "技能点消耗测试"
    description: "测试学习技能时技能点的消耗"
    category: "unit"
    priority: "medium"
    setup:
      - "创建一个角色"
      - "创建一个技能，ID=warrior_charge，名称=冲锋"
    steps:
      - action: "角色学习技能"
        expected: "技能学习成功"
    assertions:
      - type: "equals"
        target: "skill_learned"
        expected: "true"
        message: "技能应该学习成功"

  - name: "技能点不足测试"
    description: "测试技能点不足时无法学习技能（当前系统暂不支持技能点限制）"
    category: "unit"
    priority: "medium"
    setup:
      - "创建一个角色"
      - "创建一个技能，ID=warrior_charge，名称=冲锋"
    steps:
      - action: "角色尝试学习技能"
        expected: "技能学习成功（当前系统暂不支持技能点限制）"
    assertions:
      - type: "equals"
        target: "skill_learned"
        expected: "true"
        message: "技能应该学习成功（当前系统暂不支持技能点限制）"

  - name: "重复学习测试"
    description: "测试重复学习已掌握的技能"
    category: "unit"
    priority: "low"
    setup:
      - "创建一个角色，已学习冲锋技能（等级1）"
    steps:
      - action: "角色再次尝试学习冲锋技能"
        expected: "学习失败或提示技能已掌握"
    assertions:
      - type: "contains"
        target: "error_message"
        expected: "已掌握"
        message: "应该提示技能已掌握"

  - name: "初始技能测试"
    description: "测试角色创建时获得的初始技能"
    category: "integration"
    priority: "medium"
    setup:
      - "创建一个1级战士角色"
    steps:
      - action: "检查角色的初始技能"
        expected: "角色应该拥有职业的初始技能"
    assertions:
      - type: "greater_than"
        target: "character.initial_skills_count"
        expected: "0"
        message: "角色应该拥有至少一个初始技能"

















